<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Docker教程 | CrazyJums</title><meta name="description" content="1 安装dockerWindows用户一般通过安装docker-desktop(点击下载)，下载完成以后按照提示安装wsl2,然后才可以正常启用Docker，但是使用本镜像会导致出现container exit(139)的错误。在C:\Users\(用户名)中创建.wslconfig以我为例,创建C:\Users\zhangsan\.wslconfig文件中写入下面内容: 12[wsl2]kern"><meta name="keywords" content="教程,Docker"><meta name="author" content="CrazyJums"><meta name="copyright" content="CrazyJums"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://jums.club/images/favicon_64.ico"><link rel="canonical" href="http://jums.club/docker-tutorials/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta name="msvalidate.01" content="88688A1E5B9FE1F1F5EDAA94C73CD07D"/><meta name="baidu-site-verification" content="yiOH4yHRf0eeVuko"/><meta name="360-site-verification" content="d182b3f28525f2db83acfaaf6e696dba"/><meta property="og:type" content="article"><meta property="og:title" content="Docker教程"><meta property="og:url" content="http://jums.club/docker-tutorials/"><meta property="og:site_name" content="CrazyJums"><meta property="og:description" content="1 安装dockerWindows用户一般通过安装docker-desktop(点击下载)，下载完成以后按照提示安装wsl2,然后才可以正常启用Docker，但是使用本镜像会导致出现container exit(139)的错误。在C:\Users\(用户名)中创建.wslconfig以我为例,创建C:\Users\zhangsan\.wslconfig文件中写入下面内容: 12[wsl2]kern"><meta property="og:image" content="https://jums.club/images/article2/docker.png"><meta property="article:published_time" content="2021-09-02T12:30:36.000Z"><meta property="article:modified_time" content="2021-09-22T01:48:22.860Z"><meta name="twitter:card" content="summary"><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="sublime教程" href="http://jums.club/sublime-tutorials/"><link rel="next" title="select、poll和epoll区别" href="http://jums.club/diff-in-select-poll-epoll/"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '9335780214',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?109416411ccef2c884dd6e0306467b1d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-153513094-1', 'auto');
ga('send', 'pageview');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: {"languages":{"author":"Author: CrazyJums","link":"Link: ","source":"Source: CrazyJums","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><script data-ad-client="ca-pub-7924394983086399" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="generator" content="Hexo 5.4.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://jums.club/images/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">226</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">62</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-code"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-comments"></i><span> Comments</span></a></div><div class="menus_item"><a class="site-page" href="/kbooks/"><i class="fa-fw fa fa-book"></i><span> Kbooks</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/media/"><i class="fa-fw fa fa-play"></i><span> Media</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-user"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85docker"><span class="toc-number">1.</span> <span class="toc-text">1 安装docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Windows10%E5%90%AF%E5%8A%A8docker%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 Windows10启动docker失败解决办法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%90%AF%E5%8A%A8docker%E9%95%9C%E5%83%8F"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 启动docker镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%BF%AB%E9%80%9F%E6%8B%89%E5%8F%96docker%E9%95%9C%E5%83%8F"><span class="toc-number">2.</span> <span class="toc-text">2 快速拉取docker镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-helloworld%E9%95%9C%E5%83%8F"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 helloworld镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-PHP%E9%95%9C%E5%83%8F"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 PHP镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%8F%91%E5%B8%83%E9%95%9C%E5%83%8F%E5%88%B0dockerHub"><span class="toc-number">3.</span> <span class="toc-text">3 发布镜像到dockerHub</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 注册账号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%A7%84%E8%8C%83%E5%8C%96%E5%91%BD%E5%90%8D"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 规范化命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E4%BF%9D%E5%AD%98%E5%BD%93%E5%89%8D%E9%95%9C%E5%83%8F"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 保存当前镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-push"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 push</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">4.</span> <span class="toc-text">4 相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 相关命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#id-amp-amp-name"><span class="toc-number">4.1.1.</span> <span class="toc-text">id&amp;&amp;name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-inspect"><span class="toc-number">4.1.2.</span> <span class="toc-text">docker inspect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-run"><span class="toc-number">4.1.3.</span> <span class="toc-text">docker run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-exec"><span class="toc-number">4.1.4.</span> <span class="toc-text">docker exec</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-attach"><span class="toc-number">4.1.5.</span> <span class="toc-text">docker attach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-cp"><span class="toc-number">4.1.6.</span> <span class="toc-text">docker cp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-tag"><span class="toc-number">4.1.7.</span> <span class="toc-text">docker tag</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-images"><span class="toc-number">4.1.8.</span> <span class="toc-text">docker images</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-ps"><span class="toc-number">4.1.9.</span> <span class="toc-text">docker ps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-commit"><span class="toc-number">4.1.10.</span> <span class="toc-text">docker commit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-rm-amp-amp-docker-rmi"><span class="toc-number">4.1.11.</span> <span class="toc-text">docker rm &amp;&amp; docker rmi</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-AUFS"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 AUFS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%88%A0%E9%99%A4"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="toc-number">4.3.1.</span> <span class="toc-text">（1）删除容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"><span class="toc-number">4.3.2.</span> <span class="toc-text">（2）删除镜像</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Dockerfile"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 Dockerfile</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FROM"><span class="toc-number">4.4.1.</span> <span class="toc-text">FROM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#COPY-amp-amp-ADD"><span class="toc-number">4.4.2.</span> <span class="toc-text">COPY &amp;&amp; ADD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CMD"><span class="toc-number">4.4.3.</span> <span class="toc-text">CMD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RUN"><span class="toc-number">4.4.4.</span> <span class="toc-text">RUN</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E9%80%80%E5%87%BA%E5%AE%B9%E5%99%A8"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 退出容器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">5.</span> <span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E"><span class="toc-number">6.</span> <span class="toc-text">写在最后</span></a></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://jums.club/images/article2/docker.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">CrazyJums</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-code"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-comments"></i><span> Comments</span></a></div><div class="menus_item"><a class="site-page" href="/kbooks/"><i class="fa-fw fa fa-book"></i><span> Kbooks</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/media/"><i class="fa-fw fa fa-play"></i><span> Media</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-user"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Docker教程</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="Created 2021-09-02 20:30:36"><i class="far fa-calendar-alt fa-fw"></i> Created 2021-09-02</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="Updated 2021-09-22 09:48:22"><i class="fas fa-history fa-fw"></i> Updated 2021-09-22</span></time></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>Word count:</span><span class="word-count">5.5k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>Reading time: 18 min</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="1-安装docker"><a href="#1-安装docker" class="headerlink" title="1 安装docker"></a>1 安装docker</h2><p><code>Windows</code>用户一般通过安装<a target="_blank" rel="noopener" href="https://www.docker.com/products/docker-desktop">docker-desktop(点击下载)</a>，下载完成以后按照提示安装<code>wsl2</code>,然后才可以正常启用<code>Docker</code>，但是使用本镜像会导致出现<code>container exit(139)</code>的错误。<br>在<code>C:\Users\(用户名)中创建.wslconfig</code><br>以我为例,创建<code>C:\Users\zhangsan\.wslconfig</code><br>文件中写入下面内容:</p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[wsl2]</span><br><span class="line">kernelCommandLine = vsyscall=emulate</span><br></pre></td></tr></table></figure>

<h3 id="1-1-Windows10启动docker失败解决办法"><a href="#1-1-Windows10启动docker失败解决办法" class="headerlink" title="1.1 Windows10启动docker失败解决办法"></a>1.1 Windows10启动docker失败解决办法</h3><p>提示信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Docker.ApiServices.WSL2.WslKernelUpdateNotInstalledException: 引发类型为“Docker.ApiServices.WSL2.WslKernelUpdateNotInstalledException”的异常。</span><br><span class="line">   在 Docker.ApiServices.WSL2.WslShortLivedCommandResult.LogAndThrowIfUnexpectedExitCode(String prefix, ILogger log, Int32 expectedExitCode) 位置 C:\workspaces\PR-16070\src\github.com\docker\pinata\win\src\Docker.ApiServices\WSL2\WslCommand.cs:行号 140</span><br><span class="line">   在 Docker.Engines.WSL2.WSL2Provisioning.&lt;DeployDistroAsync&gt;d__17.MoveNext() 位置 C:\workspaces\PR-16070\src\github.com\docker\pinata\win\src\Docker.Desktop\Engines\WSL2\WSL2Provisioning.cs:行号 169</span><br><span class="line">--- 引发异常的上一位置中堆栈跟踪的末尾 ---</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<blockquote>
<p>打开网站 <a target="_blank" rel="noopener" href="https://czf-net.xyz/res/">https://czf-net.xyz/res/</a><br>下载wsl.msi<br>一路Next<br>重启Docker解决！</p>
</blockquote>
<p>然后在命令中执行<code>docker -v</code>命令查看是否安装成功：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904154712.png" alt=""></p>
<h3 id="1-2-启动docker镜像"><a href="#1-2-启动docker镜像" class="headerlink" title="1.2 启动docker镜像"></a>1.2 启动docker镜像</h3><p>启动一个<code>docker</code>镜像，使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>

<p>OPTIONS说明：</p>
<ul>
<li><strong>-a stdin:</strong> 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；</li>
<li><strong>-d:</strong> 后台运行容器，并返回容器ID；</li>
<li><strong>-i:</strong> 以交互模式运行容器，通常与 -t 同时使用；</li>
<li><strong>-P:</strong> 随机端口映射，容器内部端口<strong>随机</strong>映射到主机的端口</li>
<li><strong>-p:</strong> 指定端口映射，格式为：<strong>主机(宿主)端口:容器端口</strong></li>
<li><strong>-t:</strong> 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</li>
<li><strong>–name=”nginx-lb”:</strong> 为容器指定一个名称；</li>
<li><strong>–dns 8.8.8.8:</strong> 指定容器使用的DNS服务器，默认和宿主一致；</li>
<li><strong>–dns-search example.com:</strong> 指定容器DNS搜索域名，默认和宿主一致；</li>
<li><strong>-h “mars”:</strong> 指定容器的hostname；</li>
<li><strong>-e username=”ritchie”:</strong> 设置环境变量；</li>
<li><strong>–env-file=[]:</strong> 从指定文件读入环境变量；</li>
<li><strong>–cpuset=”0-2” or –cpuset=”0,1,2”:</strong> 绑定容器到指定CPU运行；</li>
<li><strong>-m :</strong>设置容器使用内存最大值；</li>
<li><strong>–net=”bridge”:</strong> 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；</li>
<li><strong>–link=[]:</strong> 添加链接到另一个容器；</li>
<li><strong>–expose=[]:</strong> 开放一个端口或一组端口；</li>
<li><strong>–volume , -v:</strong> 绑定一个卷</li>
</ul>
<p><strong>举例：</strong></p>
<p>以界面的形式运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it ubuntu /bin/bash   <span class="comment">## 以界面bash界面的形式运行名称为ubuntu的镜像</span></span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904173649.png" alt=""></p>
<p>或者你也可以在后台运行，使用<code>-d</code>参数，运行成功则会返回一个<code>CONTAINER_ID</code>：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904174031.png" alt=""></p>
<h2 id="2-快速拉取docker镜像"><a href="#2-快速拉取docker镜像" class="headerlink" title="2 快速拉取docker镜像"></a>2 快速拉取docker镜像</h2><h3 id="2-1-helloworld镜像"><a href="#2-1-helloworld镜像" class="headerlink" title="2.1 helloworld镜像"></a>2.1 helloworld镜像</h3><p>在命令行中执行如下命令，快速搭建一个docker镜像：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 docker/getting-started</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904154843.png" alt=""></p>
<p>然后在浏览器输入<a target="_blank" rel="noopener" href="http://127.0.0.1">http://127.0.0.1</a>，如果出现了如下的界面，则表示安装成功：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904154943.png" alt=""></p>
<h3 id="2-2-PHP镜像"><a href="#2-2-PHP镜像" class="headerlink" title="2.2 PHP镜像"></a>2.2 PHP镜像</h3><p>创建一个新的目录，结构如下：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904155108.png" alt=""></p>
<p>每个文件的内容如下：</p>
<ul>
<li><p>index.php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">phpinfo();</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker-composr-dev.yml   //开发环境的配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span>    <span class="comment">## 版本号，必须是一个string类型的</span></span><br><span class="line"><span class="attr">services:</span>       <span class="comment">## 对应的服务</span></span><br><span class="line">    <span class="attr">app-dev:</span>    <span class="comment">## 容器名，可可定义</span></span><br><span class="line">        <span class="attr">build:</span>  <span class="comment">## 做的事情：在当前文件夹执行文件名为Dockerfile-dev的Dockerfile</span></span><br><span class="line">            <span class="attr">context:</span> <span class="string">.</span>    </span><br><span class="line">            <span class="attr">dockerfile:</span> <span class="string">Dockerfile-dev</span></span><br><span class="line">        <span class="attr">volumes:</span>   <span class="comment">## 文件夹映射 格式：宿主机目录:容器目录（注意中间的冒号是固定格式）</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">./src:/var/www/html</span></span><br><span class="line">        <span class="attr">ports:</span>    <span class="comment">## 端口映射</span></span><br><span class="line">            <span class="bullet">-</span> <span class="number">8080</span><span class="string">:80</span> <span class="comment"># 宿主机端口:容器端口</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Dockerfile-dev  //开发环境的dockerfile</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> php:apache</span><br></pre></td></tr></table></figure>
</li>
<li><p>Dockerfile</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> php:apache</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./src /var/www/html</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Docker-compose.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">app:</span></span><br><span class="line">        <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">gcslaoli/docker-php</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="number">81</span><span class="string">:80</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>然后进入当前文件夹，执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f .\docker-compose-dev.yml up -d --build   <span class="comment">## 启动开发环境</span></span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904155637.png" alt=""></p>
<p>然后在浏览器中输入对应的网址即可：<a target="_blank" rel="noopener" href="http://127.0.0.1:8080">http://127.0.0.1:8080</a>，如果出现了如下界面，则表示成功：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904155840.png" alt=""></p>
<p>如何关闭开发环境容器呢，执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f .\docker-compose-dev.yml down            <span class="comment">## 关闭开发环境</span></span><br></pre></td></tr></table></figure>

<p>然后再通过<code>docker ps -a</code>查看当前容器是否关闭：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904161518.png" alt=""></p>
<p>也可以直接使用容器ID直接关闭，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [CONTAINER_ID] <span class="comment">## 或者</span></span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li><p><code>-t</code>：关闭容器的限时，如果超时未能关闭则用kill强制关闭，默认值10s，这个时间用于容器的自己保存状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop -t=60 容器ID或容器名</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>查看容器ID命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a   <span class="comment">## 查看所有运行的容器，可以查看对应的容器ID</span></span><br></pre></td></tr></table></figure>

<p>或者直接使用下面的命令，直接关闭：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> [CONTAINER_ID]</span><br></pre></td></tr></table></figure>

<h2 id="3-发布镜像到dockerHub"><a href="#3-发布镜像到dockerHub" class="headerlink" title="3 发布镜像到dockerHub"></a>3 发布镜像到dockerHub</h2><h3 id="3-1-注册账号"><a href="#3-1-注册账号" class="headerlink" title="3.1 注册账号"></a>3.1 注册账号</h3><p>发布<code>docker</code>镜像到<code>dockerHub</code>需要到<a target="_blank" rel="noopener" href="https://hub.docker.com/">docker官网</a>注册一个账号，这就类似我们将代码<code>push</code>到<code>GitHub</code>上的动作类似。</p>
<p>注册完成之后，首先需要登录，如果你已经再<code>docker Desktop</code>中登录了，那么在命令使用<code>docker login</code>测试以下：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904170655.png" alt=""></p>
<h3 id="3-2-规范化命名"><a href="#3-2-规范化命名" class="headerlink" title="3.2 规范化命名"></a>3.2 规范化命名</h3><p>然后使用<code>docker tag</code>命令，将需要push到<code>dockerHub</code>的镜像进行规范化命名，规范如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker push 注册用户名/镜像名</span><br><span class="line">docker tag [OLD_NAME] [NEW_NAME]  <span class="comment"># 改名</span></span><br><span class="line"><span class="comment"># 以我为例</span></span><br><span class="line">docker tag ubuntu-git crazyjums/ubuntu-git</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904170835.png" alt=""></p>
<h3 id="3-3-保存当前镜像"><a href="#3-3-保存当前镜像" class="headerlink" title="3.3 保存当前镜像"></a>3.3 保存当前镜像</h3><p>我们将镜像<code>push</code>到<code>dockerHub</code>中，首先需要对其中的配置进行修改，否则<code>push</code>就没有意义了，默认情况下，如果<code>docker</code>镜像是不会保存当前的更改的，所以，如果需要保存一下自己对当前镜像的更改，之后再<code>push</code>。</p>
<p>退出当前镜像之后，执行如下命令保存对当前镜像的更改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit [CONTAINER_ID] [NEW_NAME]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@49079ee590cc sbin]# exit</span><br><span class="line">exit</span><br><span class="line">PS C:\Users\user_name&gt; docker commit 49079ee590cc centos3</span><br><span class="line">sha256:5423bf497d8ec85d267726991e1655ade066939f898db7db3d8a4124d72fc241</span><br></pre></td></tr></table></figure>

<h3 id="3-4-push"><a href="#3-4-push" class="headerlink" title="3.4 push"></a>3.4 push</h3><p>使用如下命令将自己的镜像<code>push</code>到<code>dockerHub</code>中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push crazyjums/ubuntu-git:latest  <span class="comment"># 后面的latest指的是版本号</span></span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904171443.png" alt=""></p>
<p>这个push的动作根据你的网速的不同，时间也不一定，如果中途中断了，那么就继续，docker会保存已经上传的部分，如果继续会再上次断开的地方继续，不会重新上传，命令还是一样。如果上传完成，可以根据这个地址取网上找一下是否自己的镜像，地址规范：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker.io/[注册用户名/镜像名]</span><br></pre></td></tr></table></figure>

<p>push完成之后，可以登录自己的账号，既可以看到自己的镜像：</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210904172141.png" alt=""></p>
<h2 id="4-相关概念"><a href="#4-相关概念" class="headerlink" title="4 相关概念"></a>4 相关概念</h2><p>在使用docker之前你要明白两个概念,两个学docker过程中一定会一直强调的概念</p>
<ul>
<li>image</li>
<li>container (这种术语直接使用英文,不做翻译)</li>
</ul>
<p>这两个是整个docker的基础概念,这里本着不负责任的侥幸心理大概的说一下这两个的区别.</p>
<blockquote>
<ul>
<li>image是静态的,类比为面向对象就是一个类</li>
<li>container是动态运行的,类比为面向对象就是一个实例化的对象.</li>
</ul>
</blockquote>
<p>一般,container是可运行的,我们启动一个container之后,这个container里面就是我们的linux环境.</p>
<p>懂得了上面的意思,你就明白了我们要做的事情很简单:找一个合适的image,这个image里面应该包含一切开发时候所需要的东西, 然后启动它,我们就可以在这个container环境上工作了.当然这个时候container应该可以跟宿主共享文件.并且可以在本局域网内可以被访问到.</p>
<p>在继续搭建我们的开发环境之前,我们还是要先学一点docker的命令和概念的.</p>
<h3 id="4-1-相关命令"><a href="#4-1-相关命令" class="headerlink" title="4.1 相关命令"></a>4.1 相关命令</h3><p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/1570094-20200315124943861-1581172050.jpg" alt=""></p>
<h4 id="id-amp-amp-name"><a href="#id-amp-amp-name" class="headerlink" title="id&amp;&amp;name"></a>id&amp;&amp;name</h4><p>每个image都有一个唯一的id来标识，同样container也有。这个唯一的id一般很长，比如:<code>c59dc2dfad95</code>，但是一般我们输入的时候只要输入若干位能标识当前系统内唯一标识某一个image就可以了。比如只要输入<code>c59d</code>可能就可以标识这个image。除了id，还可以给一个image起名字，这样子也可以通过name来操作一个image。</p>
<h4 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h4><p>查看容器的详细信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [CONTAINER_ID]</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210905155638.png" alt=""></p>
<h4 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h4><p>通过<code>docker run image_name</code>可以直接启动本地的一个image。这个命令后面可以加很多子参数来开启其他功能。如果本地不存在这个image，那么docker会去官方的仓库去下载，这个仓库你可以理解为github一样的网站，上面存放了许多别人push上去的image。</p>
<p>OPTIONS说明：</p>
<ul>
<li><strong>-a stdin:</strong> 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；</li>
<li><strong>-d:</strong> 后台运行容器，并返回容器ID；</li>
<li><strong>-i:</strong> 以交互模式运行容器，通常与 -t 同时使用；</li>
<li><strong>-P:</strong> 随机端口映射，容器内部端口<strong>随机</strong>映射到主机的端口</li>
<li><strong>-p:</strong> 指定端口映射，格式为：<strong>主机(宿主)端口:容器端口</strong></li>
<li><strong>-t:</strong> 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</li>
<li><strong>–name=”nginx-lb”:</strong> 为容器指定一个名称；</li>
<li><strong>–dns 8.8.8.8:</strong> 指定容器使用的DNS服务器，默认和宿主一致；</li>
<li><strong>–dns-search example.com:</strong> 指定容器DNS搜索域名，默认和宿主一致；</li>
<li><strong>-h “mars”:</strong> 指定容器的hostname；</li>
<li><strong>-e username=”ritchie”:</strong> 设置环境变量；</li>
<li><strong>–env-file=[]:</strong> 从指定文件读入环境变量；</li>
<li><strong>–cpuset=”0-2” or –cpuset=”0,1,2”:</strong> 绑定容器到指定CPU运行；</li>
<li><strong>-m :</strong>设置容器使用内存最大值；</li>
<li><strong>–net=”bridge”:</strong> 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；</li>
<li><strong>–link=[]:</strong> 添加链接到另一个容器；</li>
<li><strong>–expose=[]:</strong> 开放一个端口或一组端口；</li>
<li><strong>–volume , -v:</strong> 绑定一个卷</li>
</ul>
<blockquote>
<p><strong>注意：</strong></p>
<p>当使用<code>docker run -d [image_name]</code>后台运行容器的时候，然后再使用<code>dokcer ps</code>查看正在运行的容器时发现刚才启动的后台容器没有运行：</p>
<p>这是因为容器使用后台运行的模式，就必须要有一个前台进程，如果docker发现没有应用，就会停止这个后台进程，所有使用<code>docker ps</code>命令就看不到对应的容器了。</p>
</blockquote>
<h4 id="docker-exec"><a href="#docker-exec" class="headerlink" title="docker exec"></a>docker exec</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> [OPTIONS] [CONTAINER_ID]</span><br></pre></td></tr></table></figure>

<p>这个命令和<code>docker run</code>命令类似，都是启动要给容器，但是这个命令和<code>docker run</code>有些不一样，这个命令是进入一个正在运行的容器，如果这个容器不在运行，那么使用这个命令就会报错，提示没有当前容器。</p>
<p><img src= "/img/loading.gif" data-src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210905155909.png" alt=""></p>
<h4 id="docker-attach"><a href="#docker-attach" class="headerlink" title="docker attach"></a>docker attach</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach [CONTAINER_ID]  <span class="comment"># 中间不能有参数</span></span><br></pre></td></tr></table></figure>

<p>这个命令也是打开一个正在执行的容器，但是这个命令和<code>docker exec</code>也有一定的区别，<code>docker exec</code>命令是重新打开终端，然后这个终端连接到那个正在执行的容器，而<code>docker attach</code>命令则是不打开一个新的终端，直接进入到那个运行的终端</p>
<h4 id="docker-cp"><a href="#docker-cp" class="headerlink" title="docker cp"></a>docker cp</h4><p>将容器中的文件拷贝到宿主机中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp [CONTAINER_ID]:[FILE_PATH] [REAL_HOST]</span><br><span class="line"><span class="comment"># 举例，拷贝文件的容器必须可以使用docker ps -a查询到，否则不能执行该命令</span></span><br><span class="line">docker cp 787dfdaa9877:/home/test.php /home   <span class="comment"># 将容器787dfdaa9877中的/home/test.php文件拷贝到宿主机在的/home目录中</span></span><br></pre></td></tr></table></figure>

<h4 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h4><p>给镜像起一个名字</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag [OLD_IMAGE_NAME] [NEW_IMAGE_NAME]</span><br></pre></td></tr></table></figure>

<p>每个image都有一个名称。除了名称之外还有一个叫做tag的东西，这个称之为标签的东西可以用来标识同一个image的不同版本。如果你没有给一个image指定一个tag，那么docker会默认为这个iamge添加一个名为:latest的tag。如果你使用<code>docker run ubuntu</code>，那么就会默认运行<code>ubuntu:latest</code>。如果本地没有这个image，那么就会去从仓库下载<code>ubuntu:latest</code>的iamge。很多时候你会看到<code>ubuntu:14.04</code>的image。这个14。04就是代表这个image的tag。只是很多时候image制作者把tag用来标记version了而已。</p>
<h4 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h4><p>这个命令会列出本地所有的images。每个image都会有一个独一无二的id。如下面 <code>IMAGE ID</code>字段。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">PS</span> C:\Windows\system<span class="number">32</span>\WindowsPowerShell\v<span class="number">1</span>.<span class="number">0</span>&gt; docker images</span><br><span class="line"><span class="attribute">REPOSITORY</span>          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line"><span class="attribute">ubuntu</span>-ok           latest              <span class="number">5</span>f<span class="number">93</span>b<span class="number">91</span>bc<span class="number">208</span>        <span class="number">26</span> hours ago        <span class="number">423</span>.<span class="number">7</span> MB</span><br><span class="line"><span class="attribute">ubuntu</span>              latest              a<span class="number">421</span>b<span class="number">4</span>d<span class="number">8494</span>d        <span class="number">27</span> hours ago        <span class="number">423</span>.<span class="number">1</span> MB</span><br><span class="line"><span class="attribute">ubuntu</span>              <span class="number">14</span>.<span class="number">04</span>               <span class="number">3</span>f<span class="number">755</span>ca<span class="number">42730</span>        <span class="number">2</span> days ago          <span class="number">188</span> MB</span><br></pre></td></tr></table></figure>

<h4 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h4><p>这个命令会列出所有在运行的container。当运行<code>docker ps -a</code>就会列出所有的container。包括已经退出的container。</p>
<h4 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a>docker commit</h4><p>这个命令可以把一个container制作成一个image。</p>
<h4 id="docker-rm-amp-amp-docker-rmi"><a href="#docker-rm-amp-amp-docker-rmi" class="headerlink" title="docker rm &amp;&amp; docker rmi"></a>docker rm &amp;&amp; docker rmi</h4><p><code>docker rm container_id</code>可以用来删除一个container。<code>docker rmi image_id/image_name</code>可以用来删除一个image。</p>
<h3 id="4-2-AUFS"><a href="#4-2-AUFS" class="headerlink" title="4.2 AUFS"></a>4.2 AUFS</h3><p>很多文章讲docker都会把这个放到后面一点讲.反正不会在类似”使用docker做开发环境”的文章里面讲. 但是我觉得这个东西是理解docker的关键.所以一定要讲.</p>
<p>AUFS比不是docker独有的,很多Linux的发行版中都用到了这个特性.说起AUFS,这个东西是UFS的升级版,前面的A就是代表advanced的意思.那AUFS/UFS到底是个什么东西?</p>
<p>所谓AUFS,Advanced Union File System 就是把不同物理位置的目录合并mount到同一个目录中.这种技术有一点典型的应用:有些linux发行版只要插入一个光盘就可以直接运行.不用进行安装.你对系统文件进行的增删改只是反映在电脑的硬盘上面,不会影响到光盘的内容.即对光盘只读不写.那么docker是如何使把这个技术应用到docker上?</p>
<p>docker把一个镜像分成了很多层layer.这些层合并在一起才成为了一个完整的image.这样子有什么好处?最直观的一点就是,ubuntu15.04跟ubuntu16.04的image可能只有一点点差别.这点差别体现在第四层layer上.那么ubuntu15.04跟16.04就可以共享前三层layer.这样子如果你本地有了ubuntu15.04的image.那么再pull ubuntu16.06的时候只要把第四层的pull下来就可以了.</p>
<p>而且,image的所有层都是<strong>只读</strong>的,当你启动一个image当做container运行的时候,docker会在image的只读层上加一层薄薄的可写层.你在container里面做的所有操作都是反映在可写层.当你退出container之后,下次启动同一个image,之前操作的所有东西都会没有掉.一个重新做人的image.</p>
<p>这个时候有一个问题就来了,我们pull一个image,启动了container.好不容易把该安装的软件都安装好了,然后退出了container.之前安装的软件就都没有了!这个时候我们就要使用commit命令了.<strong>commit命令可以把当前的可写层合并到image的只读层里面</strong>.这样子这个image又多了一层.下次我们启动这个image的时候安装的软件就都还在了.</p>
<p>一个image由好几层layer构成.每个layer都是一个只读层</p>
<p>当启动一个container之后,就会在iamge的只读层基础上添加一个可写层.所有对container执行的操作都反映在container上</p>
<p>这里提一点,当使用<code>docker images</code>命令查看iamge信息的时候,后面的SIZE是表示当前iamge所占用的大小,但是不意味着所有SIZE相加起来就是占用磁盘空间的总大小.一定要注意,可能有image共享若干层layer.这些layer在相加的时候被计算了好几遍.</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">PS</span> C:\Windows\system<span class="number">32</span>\WindowsPowerShell\v<span class="number">1</span>.<span class="number">0</span>&gt; docker images</span><br><span class="line"><span class="attribute">REPOSITORY</span>          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line"><span class="section">&lt;none&gt;</span>              <span class="section">&lt;none&gt;</span>              <span class="attribute">12e32b701daa</span>        <span class="number">25</span> minutes ago      <span class="number">188</span> MB</span><br><span class="line"><span class="attribute">ubuntu</span>              <span class="number">14</span>.<span class="number">04</span>               <span class="number">3</span>f<span class="number">755</span>ca<span class="number">42730</span>        <span class="number">3</span> days ago          <span class="number">188</span> MB</span><br><span class="line"><span class="attribute">centos</span>              <span class="number">6</span>                   <span class="number">8315978</span>ceaaa        <span class="number">6</span> weeks ago         <span class="number">194</span>.<span class="number">6</span> MB</span><br></pre></td></tr></table></figure>

<h3 id="4-3-删除"><a href="#4-3-删除" class="headerlink" title="4.3 删除"></a>4.3 删除</h3><h4 id="（1）删除容器"><a href="#（1）删除容器" class="headerlink" title="（1）删除容器"></a>（1）删除容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker rm [CONTAINER_ID]</span><br><span class="line">docker rm -f [CONTAINER_ID]   <span class="comment">#默认情况下不能删除正在运行中的容器，可以使用强制删除</span></span><br><span class="line">docker rm -f $(docker ps -aq)  <span class="comment"># 删除所有容器</span></span><br><span class="line">docker ps -aq | xargs docker rm <span class="comment"># 删除所有容器 </span></span><br></pre></td></tr></table></figure>

<h4 id="（2）删除镜像"><a href="#（2）删除镜像" class="headerlink" title="（2）删除镜像"></a>（2）删除镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [IMAGE_ID]</span><br></pre></td></tr></table></figure>

<p>上面的命令提到删除有rm跟rmi两个，rm是用来删除一个已经退出的container。rmi是用来删除一个image的。有了上面AUFS的概念之后，要明白的是我们使用<code>docker rm container_id</code>的时候，其实只是删除掉了一层可写层的数据。因为只读层是container跟image共享的。只要iamge没有被删掉，那么只读层的数据一定也不会被删除掉。</p>
<p>同样，当多个image共享若干层只读层的时候，删除掉一个image。只是删除掉了这个image独有的一层只读层数据。其他共享的数据并没有被删除掉，只有当删除掉所有的image之后，共享的layer层才会被删掉。</p>
<p>执行删除命令的时候会看到如下的信息，这里每一次deleted都是代表删除掉了一层layer。</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32\WindowsPowerShell\v1<span class="number">.0</span>&gt; docker rmi ubuntu-fin</span><br><span class="line"><span class="symbol">Untagged:</span> ubuntu-fin:latest</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">9e0728</span>e8edbaf72846c43c629590fba5f46b1d705111d3fb1d79b9cf03a6c50c</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:d53e457ca7161cd6f2d1b6678ecaafd19043dcaeb1363471867e1047819268fa</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">496</span>ef4fa137e03d80cf821745f875860d3d3120447326b8609938aa70f2edbd9</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">12e32</span>b701daa90c435176a273b2b41b4bfb219523c1ae396dc2f7068bbb6c088</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:e8f29656cf54ad60a17d4b38362d9207b52a846cce3cc13e245fc3b799ff53e9</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">48</span>f6b521c809e40468886b0a159040503d00a0abb1eabf310451edfea562b459</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:e94abc94ab1aff00280016eaf0649a75270886a2b60c8fe862ca549a0601949f</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">3</span>f755ca4273009a8b9d08aa156fbb5e601ed69dc698860938f36b2109c19cc39</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">565903</span>b66233d5576592815ca4d499bd6fe09a9b4baf83f345aaf64544f1cd78</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:b653e4373a4b35aa760ff67cfa3de2c9fe3c089823b63ec797eb04de256f86ba</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:<span class="number">362e536</span>c4e530b94ce4204461e4f8c998705bcb98c91be54dd40b22f50531f3a</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:b69ad682d83af6a6962b4a60a0b5f033c8d39efcd20dbdf320b6dd8136e50aae</span><br><span class="line"><span class="symbol">Deleted:</span> sha256:bc224b1b676d12be2a49f99778dda08b90d22747244d0a0afcdf4cfeb7db5d89</span><br></pre></td></tr></table></figure>

<p>我们再删除iamge的时候有时候不能成功删除。大概原因有一下几点:</p>
<ul>
<li>container正在运行，你删除这个container会失败。应该使用<code>docker stop container_id</code>退出当前container再尝试删除。</li>
<li>container退出了，删除当前image也会失败。因为container虽然退出，当前container保存着运行环境等数据。container是在iamge的基础上添加了一层可写层。所以他们是共享只读层的。</li>
<li>删除一个iamge会有<code>Untagged: ubuntu:14.04</code>.这个不是没有删除成功.这个是因为有其他image跟这个ubuntu:14.04共享layer层。所以删除时候并没有真正删除掉layer层的数据。</li>
</ul>
<p>ok，有了上面的预备知识，我们现在可以开始准备我们的环境了。刚刚说过，我们退出一个container之后在container所安装的软件，添加的文件等等数据都会丢失掉，所以正确的办法应该是:在一个container环境中配置好所有开发要用到的东西之后，使用<code>docker commit</code>命令来把当前这个container制作成一个image。然后下次我们启动这个image的时候环境就是我们所需要的了。但是这样子会存在三个问题:</p>
<ul>
<li>当别人给你一个image之后，你知道这个image里面安装了哪些文件，修改了哪些数据么?</li>
<li>每次commit都会形成一个新的只读层。commit次数多了会使得image变得越来越臃肿。</li>
<li>再着，一个image动辄2、3G。带着这么大个文件跑也不优雅。</li>
</ul>
<p>要解决上面的这些问题，就要使用Dockerfile了。所以我们开始之前还要做点功课。</p>
<h3 id="4-4-Dockerfile"><a href="#4-4-Dockerfile" class="headerlink" title="4.4 Dockerfile"></a>4.4 Dockerfile</h3><p>Dockerfile是用来描述如何构建一个image的,Dockerfile由一些指令构成,全部指令大概有20个左右,这里不全部讲解.只讲一些我们下面会用到的.具体Dockerfile的全部用法参考<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.docker.com%2Fengine%2Fuserguide%2Feng-image%2Fdockerfile_best-practices%2F">Docker官方出的最佳实践</a>.</p>
<h4 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h4><p>我们要制作的image必然是基于某个现有image的基础,from命令就是用来指定使用哪个基础iamge的.像很多ubuntu官方在<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https%3A%2F%2Fhub.docker.com%2F">Docker Hub</a>上维护由官方的image.我们下面开发环境的搭建就是基于ubuntu:14.04的环境下完成的.</p>
<h4 id="COPY-amp-amp-ADD"><a href="#COPY-amp-amp-ADD" class="headerlink" title="COPY &amp;&amp; ADD"></a>COPY &amp;&amp; ADD</h4><p>copy命令是把宿主机上的文件拷贝到image中.add可以是copy的高级版.</p>
<ul>
<li>copy要求拷贝的文件在宿主机上存在</li>
<li>add可以指定一个url座位源文件,docker会自动去下载这个url的文件, 然后拷贝到image中.</li>
</ul>
<p>我们待会儿就会用到add指令,因为我们需要使用<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=http%3A%2F%2Fmirrors.163.com%2F.help%2Fubuntu.html">163的ubuntu源</a>来替换ubuntu原生的<code>apt-get</code>源.所以我们的Dockerfile会有类似的指令 : <code>ADD http://mirrors.163.com/.help/sources.list.trusty /etc/apt/sources.list</code>.</p>
<h4 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h4><p>这个是指定启动一个container之后,默认执行的命令.我们执行<code>docker run ubuntu:14.04</code>启动一个container之后,默认就进入了bash界面.这就说明这个ubuntu:14.04的CMD就是bash.</p>
<p>这里要澄清一个概念.使用<code>docker run</code>之后默认进入了bash会让很多人以为启动container跟启动一个虚拟机没什么区别.其实不是的.<strong>docker的container就是为了某个进程而存在的,这个进程就是CMD所指定的程序.比如:<code>CMD /bin/bash</code>就是启动了bash.当我们退出了bash之后,整个container也就退出了.如果你的CMD写成:<code>CMD service nginx start</code>.你会发现container执行之后就马上结束了.这是因为整个container只是为了<code>service nginx start</code>这条命令而存在的,它不会管你这条命令启动了什么.默认启动的bash正好是一直在前台运行,只有你使用exit命令退出bash的时候才结束bash进程.这个时候container才结束.才会让人有container跟虚拟机差不多的错觉.</strong></p>
<p>上面的这个概念很重要,一定要理解透彻.如果没有搞清楚这点.你会一直觉得docker跟虚拟机没有什么区别.</p>
<h4 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h4><p>这个命令指定了在构建image时候image中要执行的命令.这么说可能有点蹩脚.举个例子,我们希望我们的镜像构建好的时候就安装好了git.那么我们就可以在Dockerfile里面写<code>RUN apt-get -y install git</code>.这样子在构建镜像的时候就会去安装git了.待会儿我们要安装的软件都是通过这个命令指定的.也是有了RUN指令,我们就可以知道一个image构建过程中做了一些什么操作.</p>
<h3 id="4-5-退出容器"><a href="#4-5-退出容器" class="headerlink" title="4.5 退出容器"></a>4.5 退出容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit   # 直接关闭当前容器并退出</span><br><span class="line">crtl + p + q   # 在后台运行，退出交互界面</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007875949">使用docker搭建开发环境</a></li>
<li><a target="_blank" rel="noopener" href="https://yeasy.gitbook.io/docker_practice/">docker–从入门到实践</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cuijunfeng/p/15011540.html">https://www.cnblogs.com/cuijunfeng/p/15011540.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1964y127ti">三分钟学不会的docker教程014-php开发环境搭建及打包-上</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1zN411o7Tn">三分钟学不会的docker教程015-php开发环境搭建及打包-下</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/boonya/article/details/74906927">https://blog.csdn.net/boonya/article/details/74906927</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/">docker官方文档</a></li>
</ul>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>欢迎大家关注鄙人的公众号【麦田里的守望者zhg】，让我们一起成长，谢谢。<br><img src= "/img/loading.gif" data-src="https://jums.club/images/wechataccount.jpg" alt="微信公众号"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">CrazyJums</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://jums.club/docker-tutorials/">http://jums.club/docker-tutorials/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/">教程</a><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://jums.club/images/article2/v2-358b5d13d1655b793a9cc4853d9cb750_b.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://jums.club/images/wechatpay.jpg" alt="微信" onclick="window.open('https://jums.club/images/wechatpay.jpg')"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://jums.club/images/alipay.jpg" alt="支付宝" onclick="window.open('https://jums.club/images/alipay.jpg')"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/sublime-tutorials/"><img class="prev-cover" data-src="https://jums.club/images/article2/sublime_text_4.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">sublime教程</div></div></a></div><div class="next-post pull-right"><a href="/diff-in-select-poll-epoll/"><img class="next-cover" data-src="https://jums.club/images/article2/maxresdefault.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">select、poll和epoll区别</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/ansible-tutorials/" title="ansible入门快速上手使用教程"><img class="relatedPosts_cover" data-src="https://jums.club/images/article2/GettingStartedWithAnsible.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-20</div><div class="relatedPosts_title">ansible入门快速上手使用教程</div></div></a></div><div class="relatedPosts_item"><a href="/composer-tutorials/" title="composer使用教程以及curl error 7 while downloading https://repo.packagist.org/xxx: Failed to connect to 127.0.0.1 port 8888: Connection refused问题解决"><img class="relatedPosts_cover" data-src="https://jums.club/images/article2/unnamed.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-04</div><div class="relatedPosts_title">composer使用教程以及curl error 7 while downloading https://repo.packagist.org/xxx: Failed to connect to 127.0.0.1 port 8888: Connection refused问题解决</div></div></a></div><div class="relatedPosts_item"><a href="/git-tutoraials/" title="git教程"><img class="relatedPosts_cover" data-src="https://jums.club/images/article2/git_reset_2.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-21</div><div class="relatedPosts_title">git教程</div></div></a></div><div class="relatedPosts_item"><a href="/javascript-tutorials/" title="javascript教程"><img class="relatedPosts_cover" data-src="https://jums.club/images/article2/1920px-Unofficial_JavaScript_logo_2.svg.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-11</div><div class="relatedPosts_title">javascript教程</div></div></a></div><div class="relatedPosts_item"><a href="/jetbrain-usages/" title="jetbrain软件使用技巧"><img class="relatedPosts_cover" data-src="https://jums.club/images/article2/Products21364d6.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-14</div><div class="relatedPosts_title">jetbrain软件使用技巧</div></div></a></div><div class="relatedPosts_item"><a href="/linux-cron-tutorials/" title="Linux定时任务教程"><img class="relatedPosts_cover" data-src="https://jums.club/images/article2/crontab-syntax-explained.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-08</div><div class="relatedPosts_title">Linux定时任务教程</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'false')

window.valine = new Valine({
  el:'#vcomment',
  appId: '2lPeEraOnOk7GF6ou1WWs6BP-gzGzoHsz',
  appKey: 'nXeW1bmcRE4TDrorjmdqj0ML',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'en',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://jums.club/images/article2/docker.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2021 By CrazyJums</div><div class="footer_custom_text">独立思考、不盲从、不撒谎</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font_plus" title="Increase Font Size"><i class="fas fa-plus"></i></button><button id="font_minus" title="Decrease Font Size"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script>if (document.getElementsByClassName('mermaid').length) {
  loadScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',function () {
    mermaid.initialize({
      theme: 'default',
  })
})
}</script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({{ JSON.stringify(config) }});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="{{ src }}">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html>