<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>JVM的内存结构简介 | CrazyJums</title><meta name="description" content="JVM的内存结构简介"><meta name="keywords" content="Java,JVM"><meta name="author" content="Crazy Jums"><meta name="copyright" content="Crazy Jums"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/favicon_64.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="msvalidate.01" content="88688A1E5B9FE1F1F5EDAA94C73CD07D"><meta name="baidu-site-verification" content="yiOH4yHRf0eeVuko"><meta name="360-site-verification" content="d182b3f28525f2db83acfaaf6e696dba"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="JVM的内存结构简介"><meta name="twitter:description" content="JVM的内存结构简介"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/Java-Virtual-Machine.png"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script></script><meta property="og:type" content="article"><meta property="og:title" content="JVM的内存结构简介"><meta property="og:url" content="https://jums.club/jvm-info/"><meta property="og:site_name" content="CrazyJums"><meta property="og:description" content="JVM的内存结构简介"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/Java-Virtual-Machine.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = '2'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="../css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://jums.club/jvm-info/"><link rel="prev" title="typora使用快捷键" href="https://jums.club/typra-usage/"><link rel="next" title="java中5种引用：强引用，弱引用，虚引用，软引用，终接器引用" href="https://jums.club/jvm-reference/"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?109416411ccef2c884dd6e0306467b1d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-153513094-1","auto"),ga("send","pageview")</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"We didn't find any results for the search: ${query}"}},translate:{defaultEncoding:2,translateDelay:0,cookieDomain:"https://jums.club",msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},highlight_copy:"true",highlight_lang:"true",highlight_shrink:"false",copy:{success:"Copy successfully",error:"Copy error",noSupport:"The browser does not support"},bookmark:{title:"Snackbar.bookmark.title",message_prev:"Press",message_next:"to bookmark this page"},runtime_unit:"days",copyright:{languages:{author:"Author: Crazy Jums",link:"Link: https://jums.club/jvm-info/",source:"Source: CrazyJums",info:"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},copy_copyright_js:!0,ClickShowText:{text:"富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善",fontSize:"15px"},medium_zoom:"false",Snackbar:void 0}</script></head><body><div id="header"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="../index.html">CrazyJums</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-commenting"></i> <span>Comments</span></a></div><div class="menus_item"><a class="site-page" href="/share/"><i class="fa-fw fa fa-gift"></i> <span>Share</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i> <span>Link</span></a></div><div class="menus_item"><a class="site-page" href="/media/"><i class="fa-fw fa fa-youtube-play"></i> <span>Media</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-user"></i> <span>About</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i> <span>Search</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"'></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="../archives/"><div class="headline">Articles</div><div class="length_num">117</div></a></div></div><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="../tags/"><div class="headline">Tags</div><div class="length_num">57</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-commenting"></i> <span>Comments</span></a></div><div class="menus_item"><a class="site-page" href="/share/"><i class="fa-fw fa fa-gift"></i> <span>Share</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i> <span>Link</span></a></div><div class="menus_item"><a class="site-page" href="/media/"><i class="fa-fw fa fa-youtube-play"></i> <span>Media</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-user"></i> <span>About</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-JVM结构图"><span class="toc_mobile_items-text">1 JVM结构图</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-栈内存"><span class="toc_mobile_items-text">2 栈内存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-堆内存"><span class="toc_mobile_items-text">3 堆内存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-常量池"><span class="toc_mobile_items-text">4 常量池</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-1-class文件常量池"><span class="toc_mobile_items-text">4.1 class文件常量池</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-2-运行时常量池"><span class="toc_mobile_items-text">4.2 运行时常量池</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-3-基本类型包装类对象常量池"><span class="toc_mobile_items-text">4.3 基本类型包装类对象常量池</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-4-全部字符串常量池"><span class="toc_mobile_items-text">4.4 全部字符串常量池</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-JVM参数介绍"><span class="toc_mobile_items-text">5 JVM参数介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#参考文献"><span class="toc_mobile_items-text">参考文献</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#写在最后"><span class="toc_mobile_items-text">写在最后</span></a></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JVM结构图"><span class="toc-text">1 JVM结构图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-栈内存"><span class="toc-text">2 栈内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-堆内存"><span class="toc-text">3 堆内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-常量池"><span class="toc-text">4 常量池</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-class文件常量池"><span class="toc-text">4.1 class文件常量池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-运行时常量池"><span class="toc-text">4.2 运行时常量池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-基本类型包装类对象常量池"><span class="toc-text">4.3 基本类型包装类对象常量池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-全部字符串常量池"><span class="toc-text">4.4 全部字符串常量池</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-JVM参数介绍"><span class="toc-text">5 JVM参数介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考文献"><span class="toc-text">参考文献</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写在最后"><span class="toc-text">写在最后</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image:url(https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/Java-Virtual-Machine.png)"><div id="post-info"><div id="post-title"><div class="posttitle">JVM的内存结构简介</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2020-04-13<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2020-04-16</time><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>Word count:</span> <span class="word-count">1.8k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>Reading time: 6 min</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"></i> <span>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="1-JVM结构图"><a href="#1-JVM结构图" class="headerlink" title="1 JVM结构图"></a>1 JVM结构图</h3><p><img alt data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/331425-20160623115840235-1252768148.png" class="lazyload"></p><p><img alt="JVM内存结构" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/20200415135013.png" class="lazyload"></p><p><img alt="具体结构图" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E5%9B%BE.png" class="lazyload"></p><h3 id="2-栈内存"><a href="#2-栈内存" class="headerlink" title="2 栈内存"></a>2 栈内存</h3><blockquote><p>栈内存是由编译器自动分配的内存。栈内存在函数中定义的一些基本类型的变量和对象的引用变量都在函数的栈内存中分配。当在一段代码块定义一个变量时，Java就在栈中为这个变量分配内存空间，当超过变量的作用域后，Java会自动释放掉为该变量所分配的内存空间，该内存空间可以立即被另作他用。</p></blockquote><ol><li><p>每个<code>java</code>程序线程运行时，JVM都会给该java线程分配一个java栈，不同的java线程，会拥有不同的java栈。所以，栈是线程私有的，不同的线程之间中的栈的数据是不能共享的。</p></li><li><p>栈中存放的数据包括：当前线程声明的基本数据变量，对象的引用变量等。如：<code>int a = 0;</code>，在例子中，变量名<code>a</code>就存放在栈中，数值<code>0</code>存放在常量池中。</p></li></ol><p>栈内存溢出的情况：在java程序中，栈内存溢出，主要出现在递归程序中，如果递归结束的条件设置错误，那么就容易造成栈内存溢出。如下面这段代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JvmTest</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(i++);</span><br><span class="line">		a();   <span class="comment">//递归调用本身，但是没有设置退出递归的条件</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		JvmTest j = <span class="keyword">new</span> JvmTest();</span><br><span class="line">		j.a();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure><p>如上面的代码所示，<code>a()</code>调用本身，然而并没有退出递归，所以知道栈内存空间沾满，程序抛出异常，结束。如下面的错误：</p><p><img alt="栈内存溢出" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/20200414155411.png" class="lazyload"></p><p>设置栈内存的大小</p><ul><li>-Xss128k：在IDEA中，设置栈内存大小为128k，<strong>注意：字母和数字之间没有空格</strong></li></ul><h3 id="3-堆内存"><a href="#3-堆内存" class="headerlink" title="3 堆内存"></a>3 堆内存</h3><blockquote><p>堆内存是由程序员分配的内存。堆内存是区别于栈区、全局数据区和代码区的另一个内存区域。堆允许程序在运行时动态地申请某个大小的内存空间。</p></blockquote><p><code>java</code>中，堆内存中存放的程序员自己创建的数据，而栈内存中存放的是程序运行时，由编译器自动分配的内存。一般可以认为<code>new Object()</code>出来的对象，都会存放在堆内存中。所以一般情况下，对内存和物理机的内存差不多，但是也如果程序设计不当，也会出现堆内存溢出的情况，如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> _10M = <span class="number">1014</span> * <span class="number">1024</span> * <span class="number">10</span>;<span class="comment">//这是一个10M的字节空间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;<span class="keyword">byte</span>[]&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">            list.add(<span class="keyword">new</span> <span class="keyword">byte</span>[_10M]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>程序报的错误如下：</p><p><img alt="堆内存溢出" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/20200414160654.png" class="lazyload"></p><p>设置堆内存：</p><ul><li>-Xmx200m：将当前运行环境的最大堆内存设置为200M，<strong>注意：字母和数字之间没有空格</strong></li><li>-Xms200m：将当前运行环境的最小堆内存设置为200M，可以和-Xmx设置为相同的数据值</li></ul><h3 id="4-常量池"><a href="#4-常量池" class="headerlink" title="4 常量池"></a>4 常量池</h3><h4 id="4-1-class文件常量池"><a href="#4-1-class文件常量池" class="headerlink" title="4.1 class文件常量池"></a>4.1 class文件常量池</h4><h4 id="4-2-运行时常量池"><a href="#4-2-运行时常量池" class="headerlink" title="4.2 运行时常量池"></a>4.2 运行时常量池</h4><h4 id="4-3-基本类型包装类对象常量池"><a href="#4-3-基本类型包装类对象常量池" class="headerlink" title="4.3 基本类型包装类对象常量池"></a>4.3 基本类型包装类对象常量池</h4><h4 id="4-4-全部字符串常量池"><a href="#4-4-全部字符串常量池" class="headerlink" title="4.4 全部字符串常量池"></a>4.4 全部字符串常量池</h4><h3 id="5-JVM参数介绍"><a href="#5-JVM参数介绍" class="headerlink" title="5 JVM参数介绍"></a>5 JVM参数介绍</h3><table><thead><tr><th align="left"><strong>参数名称</strong></th><th><strong>含义</strong></th><th><strong>默认值</strong></th><th></th></tr></thead><tbody><tr><td align="left">-Xms</td><td>初始堆大小</td><td>物理内存的1/64(&lt;1GB)</td><td>默认(MinHeapFreeRatio参数可以调整)空余堆内存小于40%时，JVM就会增大堆直到-Xmx的最大限制.</td></tr><tr><td align="left">-Xmx</td><td>最大堆大小</td><td>物理内存的1/4(&lt;1GB)</td><td>默认(MaxHeapFreeRatio参数可以调整)空余堆内存大于70%时，JVM会减少堆直到 -Xms的最小限制</td></tr><tr><td align="left">-Xmn</td><td>年轻代大小(1.4or lator)</td><td></td><td><strong>注意</strong>：此处的大小是（eden+ 2 survivor space).与jmap -heap中显示的New gen是不同的。 整个堆大小=年轻代大小 + 年老代大小 + 持久代大小. 增大年轻代后,将会减小年老代大小.此值对系统性能影响较大,Sun官方推荐配置为整个堆的3/8</td></tr><tr><td align="left">-XX:NewSize</td><td>设置年轻代大小(for 1.3/1.4)</td><td></td><td></td></tr><tr><td align="left">-XX:MaxNewSize</td><td>年轻代最大值(for 1.3/1.4)</td><td></td><td></td></tr><tr><td align="left">-XX:PermSize</td><td>设置持久代(perm gen)初始值</td><td>物理内存的1/64</td><td></td></tr><tr><td align="left">-XX:MaxPermSize</td><td>设置持久代最大值</td><td>物理内存的1/4</td><td></td></tr><tr><td align="left">-Xss</td><td>每个线程的堆栈大小</td><td></td><td>JDK5.0以后每个线程堆栈大小为1M,以前每个线程堆栈大小为256K.更具应用的线程所需内存大小进行 调整.在相同物理内存下,减小这个值能生成更多的线程.但是操作系统对一个进程内的线程数还是有限制的,不能无限生成,经验值在3000~5000左右 一般小的应用， 如果栈不是很深， 应该是128k够用的 大的应用建议使用256k。这个选项对性能影响比较大，需要严格的测试。（校长） 和threadstacksize选项解释很类似,官方文档似乎没有解释,在论坛中有这样一句话:”” -Xss is translated in a VM flag named ThreadStackSize” 一般设置这个值就可以了。</td></tr><tr><td align="left">-<em>XX:ThreadStackSize</em></td><td>Thread Stack Size</td><td></td><td>(0 means use default stack size) [Sparc: 512; Solaris x86: 320 (was 256 prior in 5.0 and earlier); Sparc 64 bit: 1024; Linux amd64: 1024 (was 0 in 5.0 and earlier); all others 0.]</td></tr><tr><td align="left">-XX:NewRatio</td><td>年轻代(包括Eden和两个Survivor区)与年老代的比值(除去持久代)</td><td></td><td>-XX:NewRatio=4表示年轻代与年老代所占比值为1:4,年轻代占整个堆栈的1/5 Xms=Xmx并且设置了Xmn的情况下，该参数不需要进行设置。</td></tr><tr><td align="left">-XX:SurvivorRatio</td><td>Eden区与Survivor区的大小比值</td><td></td><td>设置为8,则两个Survivor区与一个Eden区的比值为2:8,一个Survivor区占整个年轻代的1/10</td></tr><tr><td align="left">-XX:LargePageSizeInBytes</td><td>内存页的大小不可设置过大， 会影响Perm的大小</td><td></td><td>=128m</td></tr><tr><td align="left">-XX:+UseFastAccessorMethods</td><td>原始类型的快速优化</td><td></td><td></td></tr><tr><td align="left">-XX:+DisableExplicitGC</td><td>关闭System.gc()</td><td></td><td>这个参数需要严格的测试</td></tr><tr><td align="left">-XX:MaxTenuringThreshold</td><td>垃圾最大年龄</td><td></td><td>如果设置为0的话,则年轻代对象不经过Survivor区,直接进入年老代. 对于年老代比较多的应用,可以提高效率.如果将此值设置为一个较大值,则年轻代对象会在Survivor区进行多次复制,这样可以增加对象再年轻代的存活 时间,增加在年轻代即被回收的概率 该参数只有在串行GC时才有效.</td></tr><tr><td align="left">-XX:+AggressiveOpts</td><td>加快编译</td><td></td><td></td></tr><tr><td align="left">-XX:+UseBiasedLocking</td><td>锁机制的性能改善</td><td></td><td></td></tr><tr><td align="left">-Xnoclassgc</td><td>禁用垃圾回收</td><td></td><td></td></tr><tr><td align="left">-XX:SoftRefLRUPolicyMSPerMB</td><td>每兆堆空闲空间中SoftReference的存活时间</td><td>1s</td><td>softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap</td></tr><tr><td align="left">-XX:PretenureSizeThreshold</td><td>对象超过多大是直接在旧生代分配</td><td>0</td><td>单位字节 新生代采用Parallel Scavenge GC时无效 另一种直接在旧生代分配的情况是大的数组对象,且数组中无外部引用对象.</td></tr><tr><td align="left">-XX:TLABWasteTargetPercent</td><td>TLAB占eden区的百分比</td><td>1%</td><td></td></tr><tr><td align="left">-XX:+<em>CollectGen0First</em></td><td>FullGC时是否先YGC</td><td>false</td><td></td></tr></tbody></table><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><p><a href="https://juejin.im/post/5d1efae26fb9a07ea6489355" target="_blank" rel="noopener">JVM是什么？深入解析JVM原理！-掘金</a></p><p><a href="https://blog.csdn.net/u010758410/article/details/80315927" target="_blank" rel="noopener">https://blog.csdn.net/u010758410/article/details/80315927</a></p><p><a href="http://www.51gjie.com/java/551.html" target="_blank" rel="noopener">http://www.51gjie.com/java/551.html</a></p><p><a href="https://www.jianshu.com/p/cf78e68e3a99" target="_blank" rel="noopener">https://www.jianshu.com/p/cf78e68e3a99</a></p><h3 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h3><p>欢迎大家关注鄙人的公众号【麦田里的守望者zhg】，让我们一起成长，谢谢。<br><img alt="微信公众号" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/wechataccount.jpg" class="lazyload"></p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author:</span> <span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">Crazy Jums</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link:</span> <span class="post-copyright-info"><a href="https://jums.club/jvm-info/">https://jums.club/jvm-info/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice:</span> <span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="../tags/Java/">Java</a> <a class="post-meta__tags" href="../tags/JVM/">JVM</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/Java-Virtual-Machine.png" data-sites="wechat,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/wechatpay.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="../typra-usage/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/20200414161213.png" onerror='onerror=null,src="/img/404.jpg"'><div class="label">Previous Post</div><div class="prev_info"><span>typora使用快捷键</span></div></a></div><div class="next-post pull_right"><a href="../jvm-reference/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/20200413215339.png" onerror='onerror=null,src="/img/404.jpg"'><div class="label">Next Post</div><div class="next_info"><span>java中5种引用：强引用，弱引用，虚引用，软引用，终接器引用</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i> <span>Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/JVM-interview-questions/" title="JVM面试题以及字节码讲解"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/jvm_interview.jpg"><div class="relatedPosts_title">JVM面试题以及字节码讲解</div></a></div><div class="relatedPosts_item"><a href="/java-byte-code-command/" title="Java字节码指令含义解释与指令查询"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/jvm_bytecode.jpg"><div class="relatedPosts_title">Java字节码指令含义解释与指令查询</div></a></div><div class="relatedPosts_item"><a href="/java-heap-overflow-thread/" title="Java线程内部堆内存溢出，并不会导致主线程退出"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/jvm_thread.jpg"><div class="relatedPosts_title">Java线程内部堆内存溢出，并不会导致主线程退出</div></a></div><div class="relatedPosts_item"><a href="/jvm-param-info/" title="JVM虚拟机参数介绍"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/jvm_param.jpg"><div class="relatedPosts_title">JVM虚拟机参数介绍</div></a></div><div class="relatedPosts_item"><a href="/java-gc/" title="java垃圾回收算法介绍"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/jvm_algo.jpg"><div class="relatedPosts_title">java垃圾回收算法介绍</div></a></div><div class="relatedPosts_item"><a href="/jvm-of-direct-memery/" title="JVM中的直接内存"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/jvm_direct.jpg"><div class="relatedPosts_title">JVM中的直接内存</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i> <span>Comment</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify=!1,verify=!1,GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(e){return-1<GUEST_INFO.indexOf(e)});guest_info=0==guest_info.length?GUEST_INFO:guest_info,window.valine=new Valine({el:"#vcomment",notify:notify,verify:verify,appId:"2lPeEraOnOk7GF6ou1WWs6BP-gzGzoHsz",appKey:"nXeW1bmcRE4TDrorjmdqj0ML",placeholder:"Please leave your footprints",avatar:"monsterid",guest_info:guest_info,pageSize:"10",lang:"en",recordIP:!0})</script></div></div></div><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/crazyjums/crazyjums.github.io@master/images/article/Java-Virtual-Machine.png)"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By Crazy Jums</div><div class="framework-info"></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="../js/utils.js"></script><script src="../js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script async src="../js/search/local-search.js"></script><script id="ribbon_piao" mobile="true" src="../js/third-party/piao.js"></script><script src="../js/baidupush.js"></script><script src="../js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,document.body.addEventListener("input",POWERMODE)</script><script src="../js/tw_cn.js"></script><script>translateInitilization()</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><script src="../js/third-party/ClickShowText.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49b1f5">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:"wanko",bottom:-30,log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script><script async>window.onload=function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src="/sw-register.js?v="+Date.now(),t.parentNode.insertBefore(e,t)}</script></body></html>