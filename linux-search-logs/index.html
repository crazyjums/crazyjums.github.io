<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux服务器监控以及查日志教程 | CrazyJums</title><meta name="keywords" content="Linux"><meta name="author" content="CrazyJums"><meta name="copyright" content="CrazyJums"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="bash快捷键   快捷键 作用    crtl+A 把光标移动到命令行开头，如果我们输入的命令过长，想要把光标移动到命令行开头时使用   crtl+E 把光标移动到命令行结尾   crtl+C 强制终止当前的命令   crtl+L 清屏，相当于clear命令   crtl+U 删除或剪切光标之前的命令，加入输入了一串很长的命令，不用使用退格键一个一个字符的删除，使用这个命令更加方便   crtl">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta property="og:type" content="article">
<meta property="og:title" content="Linux服务器监控以及查日志教程">
<meta property="og:url" content="http://jums.club/linux-search-logs/index.html">
<meta property="og:site_name" content="CrazyJums">
<meta property="og:description" content="bash快捷键   快捷键 作用    crtl+A 把光标移动到命令行开头，如果我们输入的命令过长，想要把光标移动到命令行开头时使用   crtl+E 把光标移动到命令行结尾   crtl+C 强制终止当前的命令   crtl+L 清屏，相当于clear命令   crtl+U 删除或剪切光标之前的命令，加入输入了一串很长的命令，不用使用退格键一个一个字符的删除，使用这个命令更加方便   crtl">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jums.club/images/article2/5c36b2bf5f1a8.png">
<meta property="article:published_time" content="2021-07-28T08:16:53.000Z">
<meta property="article:modified_time" content="2021-09-06T01:25:42.619Z">
<meta property="article:author" content="CrazyJums">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jums.club/images/article2/5c36b2bf5f1a8.png"><link rel="shortcut icon" href="/images/favicon_64.ico"><link rel="canonical" href="http://jums.club/linux-search-logs/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="yiOH4yHRf0eeVuko"/><meta name="qihu-site-verification" content="d182b3f28525f2db83acfaaf6e696dba"/><meta name="bing-site-verification" content="88688A1E5B9FE1F1F5EDAA94C73CD07D"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '9335780214',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?109416411ccef2c884dd6e0306467b1d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-153513094-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-153513094-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: CrazyJums","link":"Link: ","source":"Source: CrazyJums","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux服务器监控以及查日志教程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-09-06 09:25:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">243</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">64</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-code"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-comments"></i><span> Comments</span></a></div><div class="menus_item"><a class="site-page" href="/kbooks/"><i class="fa-fw fa fa-book"></i><span> Kbooks</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/media/"><i class="fa-fw fa fa-play"></i><span> Media</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://jums.club/images/article2/5c36b2bf5f1a8.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">CrazyJums</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-code"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-comments"></i><span> Comments</span></a></div><div class="menus_item"><a class="site-page" href="/kbooks/"><i class="fa-fw fa fa-book"></i><span> Kbooks</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/media/"><i class="fa-fw fa fa-play"></i><span> Media</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux服务器监控以及查日志教程<a class="post-edit-link" href="https://github.com/crazyjums/blog3/edit/master/source/_posts/linux-search-logs.md" title="Edited on" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-07-28T08:16:53.000Z" title="Created 2021-07-28 16:16:53">2021-07-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-09-06T01:25:42.619Z" title="Updated 2021-09-06 09:25:42">2021-09-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">5.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>19min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux服务器监控以及查日志教程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/linux-search-logs/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/linux-search-logs/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="bash快捷键"><a href="#bash快捷键" class="headerlink" title="bash快捷键"></a>bash快捷键</h2><table>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>crtl+A</td>
<td>把光标移动到命令行开头，如果我们输入的命令过长，想要把光标移动到命令行开头时使用</td>
</tr>
<tr>
<td>crtl+E</td>
<td>把光标移动到命令行结尾</td>
</tr>
<tr>
<td>crtl+C</td>
<td>强制终止当前的命令</td>
</tr>
<tr>
<td>crtl+L</td>
<td>清屏，相当于clear命令</td>
</tr>
<tr>
<td>crtl+U</td>
<td>删除或剪切光标之前的命令，加入输入了一串很长的命令，不用使用退格键一个一个字符的删除，使用这个命令更加方便</td>
</tr>
<tr>
<td>crtl+K</td>
<td>删除或剪切光标之后的命令</td>
</tr>
<tr>
<td>crtl+Y</td>
<td>粘贴ctrl+U或crtl+K剪切的内容</td>
</tr>
<tr>
<td>crtl+R</td>
<td>在历史命令中搜索，按下crtl+R键之后，就会出现搜索界面，只要输入搜索内容，就会从历史命令中搜索</td>
</tr>
<tr>
<td>crtl+D</td>
<td>推出当前终端</td>
</tr>
<tr>
<td>crtl+Z</td>
<td>暂停，并放入后台，这个快捷键牵扯到工作管理的内容</td>
</tr>
<tr>
<td>crtl+S</td>
<td>暂停屏幕输出</td>
</tr>
<tr>
<td>crtl+Q</td>
<td>恢复屏幕输出</td>
</tr>
</tbody></table>
<h2 id="1-查看服务器日志"><a href="#1-查看服务器日志" class="headerlink" title="1 查看服务器日志"></a>1 查看服务器日志</h2><h3 id="1-1-统计业务接口调用的次数"><a href="#1-1-统计业务接口调用的次数" class="headerlink" title="1.1 统计业务接口调用的次数"></a>1.1 统计业务接口调用的次数</h3><h4 id="1-grep-c"><a href="#1-grep-c" class="headerlink" title="(1) grep -c"></a>(1) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/grep">grep</a> -c</h4><p>格式：grep -c {关键词} {日志文件}</p>
<p><code>-c</code>会把所有符合要求的文件都统计出数量结果，不会将所有的日志的数量进行汇总，所以这个命令执行完之后，会得到所有符合要求的文件以及该文件中符合要求的数量，如下所示：</p>
<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728162441.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -c getInfo /data/nginx/logs/info-2021-07-*</span><br></pre></td></tr></table></figure>

<p>grep正则表达式：</p>
<table>
<thead>
<tr>
<th><strong>元数据</strong></th>
<th><strong>意义和范例</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>^word</code></strong></td>
<td>搜寻以word开头的行。 例如：搜寻以#开头的脚本注释行 <strong><code>grep –n ‘^#’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>word$</code></strong></td>
<td>搜寻以word结束的行</td>
</tr>
<tr>
<td><strong><code>.</code></strong></td>
<td>匹配任意一个字符。 例如：**<code>grep –n ‘e.e’ regular.txt</code>** 匹配e和e之间有任意一个字符，可以匹配eee，eae，eve，但是不匹配ee。</td>
</tr>
<tr>
<td><strong><code>\</code></strong></td>
<td>转义字符。 例如：搜寻’，’是一个特殊字符，在正则表达式中有特殊含义。必须要先转义。**<code>grep –n ‘\,” regular.txt</code>**</td>
</tr>
<tr>
<td><strong><code>\*</code></strong></td>
<td>前面的字符重复0到多次。 例如匹配gle，gogle，google，gooogle等等 <strong><code>grep –n ‘go\*gle’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>[list]</code></strong></td>
<td>匹配一系列字符中的一个。 例如：匹配gl，gf。**<code>grep –n ‘g[lf]’ regular.txt</code>**</td>
</tr>
<tr>
<td><strong><code>[n1-n2]</code></strong></td>
<td>匹配一个字符范围中的一个字符。 例如：匹配数字字符 <strong><code>grep –n ‘[0-9]’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>[^list]</code></strong></td>
<td>匹配字符集以外的字符 例如：**<code>grep –n ‘[^o]‘ regular.txt</code>** 匹配非o字符</td>
</tr>
<tr>
<td><strong><code>\&lt;word</code></strong></td>
<td>单词是的开头。 例如：匹配以g开头的单词 <strong><code>grep –n ‘\&lt;g’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>word\&gt;</code></strong></td>
<td>前面的字符重复n1，n2次 例如：匹配google，gooogle。**<code>grep –n ‘go\&#123;2,3\&#125;gle’ regular.txt</code>**</td>
</tr>
<tr>
<td><strong><code>\&lt;word</code></strong></td>
<td>匹配单词结尾 例如：匹配以tion结尾的单词 <strong><code>grep –n ‘tion\&gt;’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>word\&#123;n1\&#125;</code></strong></td>
<td>前面的字符重复n1 例如：匹配google。 <strong><code>grep –n ‘go\&#123;2\&#125;gle’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>word\&#123;n1,\&#125;</code></strong></td>
<td>前面的字符至少重复n1 例如：匹配google，gooogle。 <strong><code>grep –n ‘go\&#123;2\&#125;gle’ regular.txt</code></strong></td>
</tr>
<tr>
<td><strong><code>word\&#123;n1,n2\&#125;</code></strong></td>
<td>前面的字符重复n1，n2次 例如：匹配google，gooogle。 <strong><code>grep –n ‘go\&#123;2,3\&#125;gle’ regular.txt</code></strong></td>
</tr>
</tbody></table>
<h4 id="2-grep与wc-l结合"><a href="#2-grep与wc-l结合" class="headerlink" title="(2) grep与wc -l结合"></a>(2) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/grep">grep</a>与<a target="_blank" rel="noopener" href="https://www.linuxcool.com/wc">wc</a> -l结合</h4><p>格式：grep {关键词} {日志文件} | wc -l</p>
<p>这个命令会把所有符合要求的文件中的统计数量进行汇总求和，所有这个命令执行完之后，会得到一个数字。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep getInfo /data/nginx/logs/info-2021-07-* | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<h4 id="3-zgrep"><a href="#3-zgrep" class="headerlink" title="(3) zgrep"></a>(3) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/zgrep">zgrep</a></h4><p>格式：zgrep {关键词} {日志文件} | wc -l</p>
<p>由于日志文件可能会很大，很多公司会每天按照大小进行切分，并以压缩格式保存，这类文件就需要使用zgrep命令进行统计。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp1crt1zqre1ar8:/HD/logs/punchout<span class="comment"># zgrep -c &#x27;TraceLogProviderFilter&#x27; punchout.2020-02-23_1.log.gz </span></span><br><span class="line">274647</span><br><span class="line">root@iZbp1crt1zqre1ar8:/HD/logs/punchout<span class="comment"># zgrep -c &#x27;TraceLogProviderFilter&#x27; punchout.2020-02-23_*.log.gz </span></span><br><span class="line">punchout.2020-02-23_1.log.gz:274647</span><br><span class="line">punchout.2020-02-23_2.log.gz:274995</span><br></pre></td></tr></table></figure>

<h4 id="4-按照正则匹配所有接口形式的调用"><a href="#4-按照正则匹配所有接口形式的调用" class="headerlink" title="(4) 按照正则匹配所有接口形式的调用"></a>(4) 按照正则匹配所有接口形式的调用</h4><p>正则表达式形式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;match($0, /\/[a-zA-Z]+\/[a-zA-Z]+/, a); print a[0];&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> log.2021081916 | awk <span class="string">&#x27;&#123;match($0, /\/[a-zA-Z]+\/[a-zA-Z]+/, a); print a[0];&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -n -r</span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210819201224.png"></p>
<h4 id="5-统计调用次数大于n的接口"><a href="#5-统计调用次数大于n的接口" class="headerlink" title="(5) 统计调用次数大于n的接口"></a>(5) 统计调用次数大于<code>n</code>的接口</h4><p>先整理出所有接口被调用的次数，然后再使用<code>awk</code>对所有接口和调用次数进行遍历，筛选出所有调用次数大于<code>n</code>的接口即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> log.20210819 | awk <span class="string">&#x27;&#123;match($0, /\/[a-zA-Z]+\/[a-zA-Z]+/, a); print a[0];&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -n -r | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;if ($1&gt;100) print $1, $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210819202734.png"></p>
<h3 id="1-2-统计访问IP的次数"><a href="#1-2-统计访问IP的次数" class="headerlink" title="1.2 统计访问IP的次数"></a>1.2 统计访问IP的次数</h3><p>首先查看日志的格式，可以按照空格进行切割，然后对切割完的结果进行排序，使用<code>sort</code>命令，最后在使用uniq命令，去除一些重复的行</p>
<blockquote>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.linuxcool.com/sort">sort</a></p>
<p>sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入。</p>
<p><strong>语法格式：</strong>sort [参数] [文件]</p>
<p><strong>常用参数：</strong></p>
<table>
<thead>
<tr>
<th>-b</th>
<th>忽略每行前面开始出的空格字符</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>检查文件是否已经按照顺序排序</td>
</tr>
<tr>
<td>-d</td>
<td>排序时，处理英文字母、数字及空格字符外，忽略其他的字符</td>
</tr>
<tr>
<td>-f</td>
<td>排序时，将小写字母视为大写字母</td>
</tr>
<tr>
<td>-i</td>
<td>排序时，除了040至176之间的ASCII字符外，忽略其他的字符</td>
</tr>
<tr>
<td>-m</td>
<td>将几个排序号的文件进行合并</td>
</tr>
<tr>
<td>-M</td>
<td>将前面3个字母依照月份的缩写进行排序</td>
</tr>
<tr>
<td>-n</td>
<td>依照数值的大小排序</td>
</tr>
<tr>
<td>-o &lt;输出文件&gt;</td>
<td>将排序后的结果存入制定的文件</td>
</tr>
<tr>
<td>-r</td>
<td>以相反的顺序来排序</td>
</tr>
<tr>
<td>-t &lt;分隔字符&gt;</td>
<td>指定排序时所用的栏位分隔字符</td>
</tr>
<tr>
<td>-k</td>
<td>指定需要排序的栏位</td>
</tr>
</tbody></table>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.linuxcool.com/uniq">uniq</a></p>
<p>uniq命令全称是“unique”，中文释义是“独特的，唯一的”。该命令的作用是用来去除文本文件中连续的重复行，中间不能夹杂其他文本行。去除了重复的，保留的都是唯一的，也就是独特的，唯一的了。</p>
<p>我们应当注意的是，它和sort的区别，sort只要有重复行，它就去除，而uniq重复行必须要连续，也可以用它忽略文件中的重复行。</p>
<p><strong>语法格式：</strong>uniq [参数] [文件]</p>
<p><strong>常用参数：</strong></p>
<table>
<thead>
<tr>
<th>-c</th>
<th>打印每行在文本中重复出现的次数</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>只显示有重复的纪录，每个重复纪录只出现一次</td>
</tr>
<tr>
<td>-u</td>
<td>只显示没有重复的纪录</td>
</tr>
</tbody></table>
</li>
</ul>
</blockquote>
<ul>
<li><p>知道IP在哪个位置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> log.2021073016-20210730 | awk -F<span class="string">&#x27; &#x27;</span> <span class="string">&#x27;&#123;print $4&#125;&#x27;</span> |  <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c</span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210731145140.png"></p>
</li>
<li><p>不知道IP在哪个位置，采用正则匹配</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> log.2021073016-20210730 | awk --re-interval <span class="string">&#x27;&#123;match($0, /([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;/, a); print a[0]&#125;&#x27;</span> |  <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -n -r</span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210819103826.png"></p>
</li>
</ul>
<h2 id="2-查看服务器负载"><a href="#2-查看服务器负载" class="headerlink" title="2 查看服务器负载"></a>2 查看服务器负载</h2><p>服务器负载一般指的是Linux服务器的<strong>CPU</strong>、<strong>内存</strong>、<strong>IO</strong>等的负载。</p>
<h3 id="1-uptime-查看系统负载"><a href="#1-uptime-查看系统负载" class="headerlink" title="(1) uptime-查看系统负载"></a>(1) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/uptime">uptime</a>-查看系统负载</h3><blockquote>
<p>Linux系统中的uptime命令主要用于获取主机运行时间和查询Linux系统负载等信息。</p>
<p>uptime命令可以显示系统已经运行了多长时间，信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登录用户、系统在过去的1分钟、5分钟和15分钟内的平均负载。 uptime命令用法十分简单，直接输入uptime即可查看系统负载情况。</p>
</blockquote>
<p><strong>语法格式</strong>：uptime [参数]</p>
<p><strong>常用参数</strong>:</p>
<table>
<thead>
<tr>
<th>-p</th>
<th>以漂亮的格式显示机器正常运行的时间</th>
</tr>
</thead>
<tbody><tr>
<td>-s</td>
<td>系统自开始运行时间，格式为yyyy-mm-dd hh:mm:ss</td>
</tr>
<tr>
<td>-h</td>
<td>显示帮助信息</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># uptime </span></span><br><span class="line"> 01:46:16 up 9 days,  2:47,  3 <span class="built_in">users</span>,  load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]<span class="comment"># uptime -p</span></span><br><span class="line">up 1 week, 2 days, 2 hours, 48 minutes</span><br><span class="line">[root@localhost ~]<span class="comment"># uptime -s</span></span><br><span class="line">2021-07-18 22:58:18</span><br></pre></td></tr></table></figure>

<h3 id="2-w-显示已登录用户"><a href="#2-w-显示已登录用户" class="headerlink" title="(2) w-显示已登录用户"></a>(2) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/w">w</a>-显示已登录用户</h3><blockquote>
<p>w命令用于显示已经登陆系统的用户列表，并显示用户正在执行的指令。执行这个命令可得知目前登入系统的用户有哪些人，以及他们正在执行的程序。单独执行w命令会显示所有的用户，您也可指定用户名称，仅显示某位用户的相关信息。</p>
</blockquote>
<p><strong>语法格式：</strong>w [参数]</p>
<p><strong>常用参数：</strong>﻿</p>
<table>
<thead>
<tr>
<th>-h&#x2F;–no-header</th>
<th>不打印头信息</th>
</tr>
</thead>
<tbody><tr>
<td>-u&#x2F;–no-current</td>
<td>当显示当前进程和cpu时间时忽略用户名</td>
</tr>
<tr>
<td>-s&#x2F;–short</td>
<td>使用短输出格式</td>
</tr>
<tr>
<td>-f&#x2F;–from</td>
<td>显示用户从哪登录</td>
</tr>
<tr>
<td>-o&#x2F;–old-style</td>
<td>老式输出</td>
</tr>
<tr>
<td>-i&#x2F;–ip-addr</td>
<td>显示IP地址而不是主机名（如果可能）</td>
</tr>
<tr>
<td>–help</td>
<td>显示此帮助并退出</td>
</tr>
<tr>
<td>-V&#x2F;–version</td>
<td>显示版本信息</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># w</span></span><br><span class="line"> 01:50:46 up 9 days,  2:52,  4 <span class="built_in">users</span>,  load average: 0.14, 0.08, 0.07</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/0    192.168.10.1     Tue04    5:50m  0.22s  0.16s redis-cli -h 10.18.243.168 -p 6379</span><br><span class="line">root     pts/3    192.168.10.1     Tue04    1:18   0.36s  0.36s -bash</span><br><span class="line">root     pts/4    192.168.10.1     Tue04    6.00s  0.11s  0.11s -bash</span><br><span class="line">centos   pts/5    192.168.10.1     01:49   46.00s  0.09s  0.01s mysql -uroot -px xxxxxxxxx</span><br></pre></td></tr></table></figure>

<h3 id="3-top-实时显示进程动态"><a href="#3-top-实时显示进程动态" class="headerlink" title="(3) top-实时显示进程动态"></a>(3) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/top">top</a>-实时显示进程动态</h3><blockquote>
<p>top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，常用于服务端性能分析。</p>
<p>在top命令中按f按可以查看显示的列信息，按对应字母来开启&#x2F;关闭列，大写字母表示开启，小写字母表示关闭。带*号的是默认列。</p>
</blockquote>
<p><strong>语法格式：</strong>top [参数]</p>
<p><strong>常用参数：</strong></p>
<table>
<thead>
<tr>
<th>-d</th>
<th>改变显示的更新速度，或是在交谈式指令列( interactive command)按 s</th>
</tr>
</thead>
<tbody><tr>
<td>-q</td>
<td>没有任何延迟的显示速度，如果使用者是有 superuser 的权限，则 top 将会以最高的优先序执行</td>
</tr>
<tr>
<td>-c</td>
<td>切换显示模式</td>
</tr>
<tr>
<td>-s</td>
<td>安全模式，将交谈式指令取消, 避免潜在的危机</td>
</tr>
<tr>
<td>-i</td>
<td>不显示任何闲置 (idle) 或无用 (zombie) 的行程</td>
</tr>
<tr>
<td>-n</td>
<td>更新的次数，完成后将会退出 top</td>
</tr>
<tr>
<td>-b</td>
<td>批次档模式，搭配 “n” 参数一起使用，可以用来将 top 的结果输出到档案内</td>
</tr>
</tbody></table>
<blockquote>
<img src="https://jums.club/images/article2/微信截图_20210802145432.png" style="zoom:75%;" />

<p>其中，统计信息区前五行是系统整体的统计信息。第一行是任务队列信息，同 uptime 命令的执行结果。其内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">01:06:48    当前时间</span><br><span class="line">up 1:22    系统运行时间，格式为时:分</span><br><span class="line">1 user    当前登录用户数</span><br><span class="line">load average: 0.06, 0.60, 0.48    系统负载，即任务队列的平均长度。三个数值分别为 1分钟、5分钟、15分钟前到现在的平均值。</span><br></pre></td></tr></table></figure>

<p>第二、三行为进程和CPU的信息。当有多个CPU时，这些内容可能会超过两行。内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">total 进程总数</span><br><span class="line">running 正在运行的进程数</span><br><span class="line">sleeping 睡眠的进程数</span><br><span class="line">stopped 停止的进程数</span><br><span class="line">zombie 僵尸进程数</span><br><span class="line">Cpu(s): </span><br><span class="line">0.3% us 用户空间占用CPU百分比</span><br><span class="line">1.0% sy 内核空间占用CPU百分比</span><br><span class="line">0.0% ni 用户进程空间内改变过优先级的进程占用CPU百分比</span><br><span class="line">98.7% id 空闲CPU百分比</span><br><span class="line">0.0% wa 等待输入输出的CPU时间百分比</span><br><span class="line">0.0%hi：硬件CPU中断占用百分比</span><br><span class="line">0.0%si：软中断占用百分比</span><br><span class="line">0.0%st：虚拟机占用百分比</span><br></pre></td></tr></table></figure>

<p>最后两行为内存信息，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Mem:</span><br><span class="line">191272k total    物理内存总量</span><br><span class="line">173656k used    使用的物理内存总量</span><br><span class="line">17616k free    空闲内存总量</span><br><span class="line">22052k buffers    用作内核缓存的内存量</span><br><span class="line">Swap: </span><br><span class="line">192772k total    交换区总量</span><br><span class="line">0k used    使用的交换区总量</span><br><span class="line">192772k free    空闲交换区总量</span><br><span class="line">123988k cached    缓冲的交换区总量,内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，该数值即为这些内容已存在于内存中的交换区的大小,相应的内存再次被换出时可不必再对交换区写入。</span><br></pre></td></tr></table></figure>

<p>进程信息区统计信息区域的下方显示了各个进程的详细信息。各列的含义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">序号  列名    含义</span><br><span class="line">a    PID     进程id</span><br><span class="line">b    PPID    父进程id</span><br><span class="line">c    RUSER   Real user name</span><br><span class="line">d    UID     进程所有者的用户id</span><br><span class="line">e    USER    进程所有者的用户名</span><br><span class="line">f    GROUP   进程所有者的组名</span><br><span class="line">g    TTY     启动进程的终端名。不是从终端启动的进程则显示为 ?</span><br><span class="line">h    PR      优先级</span><br><span class="line">i    NI      nice值。负值表示高优先级，正值表示低优先级</span><br><span class="line">j    P       最后使用的CPU，仅在多CPU环境下有意义</span><br><span class="line">k    %CPU    上次更新到现在的CPU时间占用百分比</span><br><span class="line">l    TIME    进程使用的CPU时间总计，单位秒</span><br><span class="line">m    TIME+   进程使用的CPU时间总计，单位1/100秒</span><br><span class="line">n    %MEM    进程使用的物理内存百分比</span><br><span class="line">o    VIRT    进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</span><br><span class="line">p    SWAP    进程使用的虚拟内存中，被换出的大小，单位kb。</span><br><span class="line">q    RES     进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA</span><br><span class="line">r    CODE    可执行代码占用的物理内存大小，单位kb</span><br><span class="line">s    DATA    可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb</span><br><span class="line">t    SHR     共享内存大小，单位kb</span><br><span class="line">u    nFLT    页面错误次数</span><br><span class="line">v    nDRT    最后一次写入到现在，被修改过的页面数。</span><br><span class="line">w    S       进程状态(D=不可中断的睡眠状态,R=运行,S=睡眠,T=跟踪/停止,Z=僵尸进程)</span><br><span class="line">x    COMMAND 命令名/命令行</span><br><span class="line">y    WCHAN   若该进程在睡眠，则显示睡眠中的系统函数名</span><br><span class="line">z    Flags   任务标志，参考 sched.h</span><br></pre></td></tr></table></figure>

<p>默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND 列。可以通过下面的快捷键来更改显示内容。 </p>
<p>更改显示内容通过 <strong>f</strong> 键可以选择显示的内容。按 f 键之后会显示列的列表，按 a-z 即可显示或隐藏对应的列，最后按回车键确定。<br>按 <strong>o</strong> 键可以改变列的显示顺序。按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z 可以将相应的列向左移动。最后按回车键确定。<br>按大写的 <strong>F</strong> 或 <strong>O</strong> 键，然后按 a-z 可以将进程按照相应的列进行排序。而大写的 <strong>R</strong> 键可以将当前的排序倒转。</p>
<p><strong>其他实用命令：</strong></p>
<p>下面介绍在top命令执行过程中可以使用的一些交互命令。从使用角度来看，熟练的掌握这些命令比掌握选项还重要一些。这些命令都是单字母的，如果在命令行选项中使用了s选项，则可能其中一些命令会被屏蔽掉：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+L 擦除并且重写屏幕。 </span><br><span class="line">h或者? 显示帮助画面，给出一些简短的命令总结说明。 </span><br><span class="line">k       终止一个进程。系统将提示用户输入需要终止的进程PID，以及需要发送给该进程什么样的信号。一般的终止进程可以使用15信号；如果不能正常结束那就使用信号9强制结束该进程。默认值是信号15。在安全模式中此命令被屏蔽。 </span><br><span class="line">i 忽略闲置和僵死进程。这是一个开关式命令。 </span><br><span class="line">q 退出程序。 </span><br><span class="line">r 重新安排一个进程的优先级别。系统提示用户输入需要改变的进程PID以及需要设置的进程优先级值。输入一个正值将使优先级降低，反之则可以使该进程拥有更高的优先权。默认值是10。 </span><br><span class="line">S 切换到累计模式。 </span><br><span class="line">s 改变两次刷新之间的延迟时间。系统将提示用户输入新的时间，单位为s。如果有小数，就换算成m s。输入0值则系统将不断刷新，默认值是5 s。需要注意的是如果设置太小的时间，很可能会引起不断刷新，从而根本来不及看清显示的情况，而且系统负载也会大大增加。 </span><br><span class="line">f或者F 从当前显示中添加或者删除项目。 </span><br><span class="line">o或者O 改变显示项目的顺序。 </span><br><span class="line">l 切换显示平均负载和启动时间信息。 </span><br><span class="line">m 切换显示内存信息。 </span><br><span class="line">t 切换显示进程和CPU状态信息。 </span><br><span class="line">c 切换显示命令名称和完整命令行。 </span><br><span class="line">M 根据驻留内存大小进行排序。 </span><br><span class="line">P 根据CPU使用百分比大小进行排序。 </span><br><span class="line">T 根据时间/累计时间进行排序。 </span><br><span class="line">W 将当前设置写入~/.toprc文件中。这是写top配置文件的推荐方法。</span><br></pre></td></tr></table></figure>

<p><strong>top命令常用操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">top   //每隔5秒显式所有进程的资源占用情况</span><br><span class="line">top -d 2  //每隔2秒显式所有进程的资源占用情况</span><br><span class="line">top -c  //每隔5秒显式进程的资源占用情况，并显示进程的命令行参数(默认只有进程名)</span><br><span class="line">top -p 12345 -p 6789//每隔5秒显示pid是12345和pid是6789的两个进程的资源占用情况</span><br><span class="line">top -d 2 -c -p 123456 //每隔2秒显示pid是12345的进程的资源使用情况，并显式该进程启动的命令行参数</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>查看CPU个数</p>
<p>在top界面下，按下1，即可查看cpu个数。</p>
<p><img src="https://jums.club/images/article2/20140809122649921.png"></p>
</li>
</ul>
<h3 id="4-iostat-监视系统输入输出设备和CPU的使用情况"><a href="#4-iostat-监视系统输入输出设备和CPU的使用情况" class="headerlink" title="(4) iostat-监视系统输入输出设备和CPU的使用情况"></a>(4) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/iostat">iostat</a>-监视系统输入输出设备和CPU的使用情况</h3><blockquote>
<p>iostat被用于监视系统输入输出设备和CPU的使用情况。它的特点是汇报磁盘活动统计情况，同时也会汇报出CPU使用情况。</p>
</blockquote>
<p><strong>语法格式：</strong> iostat [参数] [设备]</p>
<p><strong>常用参数：</strong></p>
<table>
<thead>
<tr>
<th>-c</th>
<th>仅显示CPU使用情况</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>仅显示设备利用率</td>
</tr>
<tr>
<td>-k</td>
<td>显示状态以千字节每秒为单位，而不使用块每秒</td>
</tr>
<tr>
<td>-m</td>
<td>显示状态以兆字节每秒为单位</td>
</tr>
<tr>
<td>-p</td>
<td>仅显示块设备和所有被使用的其他分区的状态</td>
</tr>
<tr>
<td>-t</td>
<td>显示每个报告产生时的时间</td>
</tr>
</tbody></table>
<h3 id="5-mpstat"><a href="#5-mpstat" class="headerlink" title="(5) mpstat"></a>(5) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/mpstat">mpstat</a></h3><p>mpstat mpstat是MultiProcessor Statistics的缩写，是实时系统监控工具。其报告与CPU的一些统计信息，这些信息存放在&#x2F;proc&#x2F;stat文件中。在多CPUs系统里，其不但能查看所有CPU的平均状况信息，而且能够查看特定CPU的信息。</p>
<p>再来看看 oschina 上的 mpstat 命令执行结果：</p>
<p><img src="https://jums.club/images/article2/121212.PNG"></p>
<h3 id="6-netstat"><a href="#6-netstat" class="headerlink" title="(6) netstat"></a>(6) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/netstat">netstat</a></h3><p>Netstat 和 ps 命令类似，是 Linux 管理员基本上每天都会用的工具，它显示了大量跟网络相关的信息，例如 socket 的使用、路由、接口、协议、网络等等，下面是一些常用的参数：</p>
<ul>
<li><code>-a</code> Show all socket information</li>
<li>-<code>r</code> Show routing information</li>
<li><code>-i</code> Show network interface statistics</li>
<li><code>-s</code> Show network protocol statistics</li>
</ul>
<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728223119.png"></p>
<h3 id="7-nmon"><a href="#7-nmon" class="headerlink" title="(7) nmon"></a>(7) <a target="_blank" rel="noopener" href="http://nmon.sourceforge.net/pmwiki.php">nmon</a></h3><p>Nmon, 是 Nigel’s Monitor 的缩写，是一个使用很普遍的开源工具，用以监控 Linux 系统的性能。Nmon 监控多个子系统的性能数据，例如处理器的使用率、内存使用率、队列、磁盘I&#x2F;O统计、网络I&#x2F;O统计、内存页处理和进程信息。Nmon 也提供了一个图形化的工具。</p>
<p>要运行 nmon，你可以在命令行中启动它，然后选择要监控的子系统，这些子系统都对应有一个快捷键，例如输入 c 可查看 CPU 信息，m用于查看内存，d用来查看磁盘信息等，你也可以使用 -f 命令将 nmon 的执行结果保存到一个 CSV 文件中，便于日后分析。在每日的监控工作中，我发现 nmon 是我最常用的工具。</p>
<p>nmon不是Linux系统自带的命令，需要进行安装，安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nmon</span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728223221.png"></p>
<h3 id="8-ps-pstree"><a href="#8-ps-pstree" class="headerlink" title="(8) ps|pstree"></a>(8) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/ps">ps</a>|<a target="_blank" rel="noopener" href="https://www.linuxcool.com/pstree">pstree</a></h3><p>ps 和 pstree 命令是 Linux 系统管理员最好的朋友，都可以用来列表正在运行的所有进程。ps 告诉你每个进程占用的内存和 CPU 处理时间，而 pstree 显示的信息没那么详细，但它以树形结构显示进程之间的依赖关系，包括子进程信息。一旦发现某个进程有问题，你可以使用 kill 来杀掉它。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> pid  <span class="comment"># kill a process</span></span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728223655.png"></p>
<h3 id="9-sar-系统运行状态统计"><a href="#9-sar-系统运行状态统计" class="headerlink" title="(9) sar-系统运行状态统计"></a>(9) <a target="_blank" rel="noopener" href="https://www.linuxcool.com/sar">sar</a>-系统运行状态统计</h3><p>该命令号称系统监控的瑞士军刀，目前Linux上最为全面的系统性能分析工具之一，可以从14个大方面对系统的活动进行报告，包括文件的读写情况、系统调用的使用情况、串口、CPU效率、内存使用状况、进程活动及IPC有关的活动等，使用也是较为复杂。</p>
<p>sar 默认显示的是从零点开始每隔十分钟到现在的CPU情况，如果是查看之前的报告，需要指定日志报告，sar -f &#x2F;var&#x2F;log&#x2F;sysstat&#x2F;sa25 。</p>
<p>解释下各列的指标：</p>
<p>%user 用户模式下消耗的CPU时间的比例；</p>
<p>%nice 通过nice改变了进程调度优先级的进程，在用户模式下消耗的CPU时间的比例</p>
<p>%system 系统模式下消耗的CPU时间的比例；</p>
<p>%iowait CPU等待磁盘I&#x2F;O导致空闲状态消耗的时间比例；</p>
<p>%steal 利用Xen等操作系统虚拟化技术，等待其它虚拟CPU计算占用的时间比例；</p>
<p>%idle CPU空闲时间比例；</p>
<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728223935.png"></p>
<ul>
<li><p>查看内存使用情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sar -r</span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728224316.png"></p>
</li>
<li><p>查看带宽</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sar -n DEV</span><br></pre></td></tr></table></figure>

<p><img src="https://jums.club/images/article2/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728224423.png"></p>
</li>
<li><p>tips</p>
<blockquote>
<p>要判断系统瓶颈问题，有时需几个 sar 命令选项结合起来；</p>
<p>怀疑CPU存在瓶颈，可用 sar -u 和 sar -q 等来查看</p>
<p>怀疑内存存在瓶颈，可用sar -B、sar -r 和 sar -W 等来查看</p>
<p>怀疑I&#x2F;O存在瓶颈，可用 sar -b、sar -u 和 sar -d 等来查看</p>
</blockquote>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/pjx827480541/article/details/104457511">https://blog.csdn.net/pjx827480541/article/details/104457511</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/szchtx/article/details/38455385">Linux查看机器负载</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1533965">https://cloud.tencent.com/developer/article/1533965</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ggjucheng/archive/2012/01/08/2316399.html">https://www.cnblogs.com/ggjucheng/archive/2012/01/08/2316399.html</a></li>
</ul>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>欢迎大家关注鄙人的公众号【麦田里的守望者zhg】，让我们一起成长，谢谢。<br><img src="https://jums.club/images/wechataccount.jpg" alt="微信公众号"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">CrazyJums</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://jums.club/linux-search-logs/">http://jums.club/linux-search-logs/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://jums.club/images/article2/5c36b2bf5f1a8.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechatpay.jpg" target="_blank"><img class="post-qr-code-img" src="/images/wechatpay.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/images/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/images/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li><li class="reward-item"><a href="/images/bitcoin.jpg" target="_blank"><img class="post-qr-code-img" src="/images/bitcoin.jpg" alt="bitcoin"/></a><div class="post-qr-code-desc">bitcoin</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/sql-select-optimization/"><img class="prev-cover" src="https://jums.club/images/article2/2021032416152970237.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">值得收藏的52条SQL优化策略</div></div></a></div><div class="next-post pull-right"><a href="/install-mysql-on-linux/"><img class="next-cover" src="https://jums.club/images/article2/56207.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">在Linux上安装MySQL</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/How-to-connect-remote-redis-server/" title="How to connect remote redis server"><img class="cover" src="https://jums.club/images/article/banner-1544x500.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-30</div><div class="title">How to connect remote redis server</div></div></a></div><div><a href="/ansible-tutorials/" title="ansible入门快速上手使用教程"><img class="cover" src="https://jums.club/images/article2/GettingStartedWithAnsible.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-20</div><div class="title">ansible入门快速上手使用教程</div></div></a></div><div><a href="/awk-cases/" title="awk常用案例"><img class="cover" src="https://jums.club/images/article2/v2-bedc10fa7a3460159d528bd7405571df_720w.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-31</div><div class="title">awk常用案例</div></div></a></div><div><a href="/brfore-work/" title="Before you start work, you should know ..."><img class="cover" src="https://jums.club/images/article/apps.46003.14259451864568504.ad5e5d07-0fbb-46ed-b9b6-a1b781645691.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-24</div><div class="title">Before you start work, you should know ...</div></div></a></div><div><a href="/diff-in-select-poll-epoll/" title="select、poll和epoll区别"><img class="cover" src="https://jums.club/images/article2/maxresdefault.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-23</div><div class="title">select、poll和epoll区别</div></div></a></div><div><a href="/how-to-change-timezone-in-linux/" title="How to change timezone in linux"><img class="cover" src="https://jums.club/images/article/featured_hu626e9890ffbdd612a661545b9982ae95_25842_768x0_resize_q75_lanczos.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-25</div><div class="title">How to change timezone in linux</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CrazyJums</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">243</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">64</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/crazyjums"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/crazyjums" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://jums.club/images/mywechat.jpg" target="_blank" title="Wechat"><i class="fa fa-comments"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_33521184" target="_blank" title="Blog"><i class="fa fa-bold"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">如果有疑问可以微信我：crazyjumsz</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#bash%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">bash快捷键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%A5%E5%BF%97"><span class="toc-number">2.</span> <span class="toc-text">1 查看服务器日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E7%BB%9F%E8%AE%A1%E4%B8%9A%E5%8A%A1%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E7%9A%84%E6%AC%A1%E6%95%B0"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 统计业务接口调用的次数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-grep-c"><span class="toc-number">2.1.1.</span> <span class="toc-text">(1) grep -c</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-grep%E4%B8%8Ewc-l%E7%BB%93%E5%90%88"><span class="toc-number">2.1.2.</span> <span class="toc-text">(2) grep与wc -l结合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-zgrep"><span class="toc-number">2.1.3.</span> <span class="toc-text">(3) zgrep</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%8C%89%E7%85%A7%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89%E6%8E%A5%E5%8F%A3%E5%BD%A2%E5%BC%8F%E7%9A%84%E8%B0%83%E7%94%A8"><span class="toc-number">2.1.4.</span> <span class="toc-text">(4) 按照正则匹配所有接口形式的调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%BB%9F%E8%AE%A1%E8%B0%83%E7%94%A8%E6%AC%A1%E6%95%B0%E5%A4%A7%E4%BA%8En%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.1.5.</span> <span class="toc-text">(5) 统计调用次数大于n的接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E7%BB%9F%E8%AE%A1%E8%AE%BF%E9%97%AEIP%E7%9A%84%E6%AC%A1%E6%95%B0"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 统计访问IP的次数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B4%9F%E8%BD%BD"><span class="toc-number">3.</span> <span class="toc-text">2 查看服务器负载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-uptime-%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E8%B4%9F%E8%BD%BD"><span class="toc-number">3.1.</span> <span class="toc-text">(1) uptime-查看系统负载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-w-%E6%98%BE%E7%A4%BA%E5%B7%B2%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7"><span class="toc-number">3.2.</span> <span class="toc-text">(2) w-显示已登录用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-top-%E5%AE%9E%E6%97%B6%E6%98%BE%E7%A4%BA%E8%BF%9B%E7%A8%8B%E5%8A%A8%E6%80%81"><span class="toc-number">3.3.</span> <span class="toc-text">(3) top-实时显示进程动态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-iostat-%E7%9B%91%E8%A7%86%E7%B3%BB%E7%BB%9F%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87%E5%92%8CCPU%E7%9A%84%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-number">3.4.</span> <span class="toc-text">(4) iostat-监视系统输入输出设备和CPU的使用情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-mpstat"><span class="toc-number">3.5.</span> <span class="toc-text">(5) mpstat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-netstat"><span class="toc-number">3.6.</span> <span class="toc-text">(6) netstat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-nmon"><span class="toc-number">3.7.</span> <span class="toc-text">(7) nmon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-ps-pstree"><span class="toc-number">3.8.</span> <span class="toc-text">(8) ps|pstree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-sar-%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1"><span class="toc-number">3.9.</span> <span class="toc-text">(9) sar-系统运行状态统计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E"><span class="toc-number">5.</span> <span class="toc-text">写在最后</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/a-java-bug-about-long-type/" title="a java bug about long type"><img src="https://jums.club/images/article2/bug.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="a java bug about long type"/></a><div class="content"><a class="title" href="/a-java-bug-about-long-type/" title="a java bug about long type">a java bug about long type</a><time datetime="2022-06-15T08:12:10.000Z" title="Created 2022-06-15 16:12:10">2022-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/git-change-commit-message/" title="Git 修改已提交 commit 的信息"><img src="https://jums.club/images/article2/git_reset.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 修改已提交 commit 的信息"/></a><div class="content"><a class="title" href="/git-change-commit-message/" title="Git 修改已提交 commit 的信息">Git 修改已提交 commit 的信息</a><time datetime="2022-05-31T08:31:23.000Z" title="Created 2022-05-31 16:31:23">2022-05-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/php-upload-file/" title="php上传文件"><img src="https://jums.club/images/article2/php_upload_files.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="php上传文件"/></a><div class="content"><a class="title" href="/php-upload-file/" title="php上传文件">php上传文件</a><time datetime="2022-04-02T07:44:34.000Z" title="Created 2022-04-02 15:44:34">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/phh-diff-and-919/" title="phh中的$和$$的区别，以及引用&amp;的用法?"><img src="https://jums.club/images/article2/phplogo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="phh中的$和$$的区别，以及引用&amp;的用法?"/></a><div class="content"><a class="title" href="/phh-diff-and-919/" title="phh中的$和$$的区别，以及引用&amp;的用法?">phh中的$和$$的区别，以及引用&amp;的用法?</a><time datetime="2022-04-02T03:08:26.000Z" title="Created 2022-04-02 11:08:26">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/idea-project-error/" title="IDEA 中 project窗口，不显示项目工程目录，解决方法"><img src="https://jums.club/images/article2/18805700-38f05f88f2f2ea13.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IDEA 中 project窗口，不显示项目工程目录，解决方法"/></a><div class="content"><a class="title" href="/idea-project-error/" title="IDEA 中 project窗口，不显示项目工程目录，解决方法">IDEA 中 project窗口，不显示项目工程目录，解决方法</a><time datetime="2022-04-01T09:25:51.000Z" title="Created 2022-04-01 17:25:51">2022-04-01</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://jums.club/images/article2/5c36b2bf5f1a8.png')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By CrazyJums</div><div class="footer_custom_text">独立思考、不盲从、不撒谎</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '2lPeEraOnOk7GF6ou1WWs6BP-gzGzoHsz',
      appKey: 'nXeW1bmcRE4TDrorjmdqj0ML',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({{ JSON.stringify(config) }});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="{{ src }}">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html>